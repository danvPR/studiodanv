<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>Studio Dự Án Người Việt - Nơi Sáng Tạo Mã Hóa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/png" href="https://cdn2.scratch.mit.edu/get_image/user/149945770_60x60.png">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <style>
        /* Universal box-sizing */
        *, ::before, ::after {
            box-sizing: border-box;
        }

        /* Định nghĩa các biến CSS cho hiệu ứng kính */
        :root {
            --tint-color: 255, 255, 255;
            --tint-opacity: 0.1;
            /* Độ trong suốt tinh tế */
            --frost-blur: 30px;
            /* Tăng độ mờ sương để nổi bật và mượt mà hơn */
            --outer-shadow-blur: 60px;
            /* Tăng độ mờ của bóng đổ bên ngoài */
        }

        html {
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* Ẩn thanh trượt ngang cho toàn bộ tài liệu */
            overflow-y: scroll; /* Buộc một thanh trượt dọc duy nhất cho toàn bộ tài liệu */
            min-height: 100%; /* Đảm bảo html có chiều cao ít nhất 100% */
        }

        body {
            margin: 0;
            padding: 0;
            min-height: 100%; /* Đảm bảo body có chiều cao ít nhất 100% */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            background-color: #ffffff;
            /* Nền màu trắng */
            font-family: 'Open Sans', sans-serif;
            /* Sử dụng font Open Sans */
            color: #333;
            /* Màu chữ tối hơn cho nền trắng */
            position: relative;
            /* Đã bỏ animation chuyển màu nền */
        }

        /* Lớp container cho các phần tử có hiệu ứng Liquid Glass */
        .liquid-glass-container {
            position: relative;
            border-radius: 40px;
            /* Bo tròn góc nhiều hơn nữa */
            overflow: hidden;
            isolation: isolate;
            box-shadow: 0px 20px var(--outer-shadow-blur) rgba(0, 0, 0, 0.1);
            /* Bóng đổ nhẹ hơn cho nền trắng */
            transition: all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
            /* Easing mượt mà hơn */
            border: 1px solid rgba(0, 0, 0, 0.1);
            /* Đường viền rõ hơn */
            transform-origin: center; /* Add transform-origin for centered scaling */
        }

        .liquid-glass-container:hover {
            transform: translateY(-5px) scale(1.01); /* Nâng nhẹ hơn và phóng to nhẹ */
            box-shadow: 0px 30px calc(var(--outer-shadow-blur) * 1.5) rgba(0, 0, 0, 0.15); /* Bóng đổ mềm mại hơn */
            border: 1px solid rgba(0, 0, 0, 0.18); /* Viền sáng hơn */
        }

        /* Lớp overlay tạo hiệu ứng kính */
        .liquid-glass-overlay {
            position: absolute;
            inset: 0;
            z-index: -1;
            border-radius: 40px;
            /* Phù hợp với container */
            background-color: rgba(var(--tint-color), var(--tint-opacity));
            backdrop-filter: blur(var(--frost-blur));
            -webkit-backdrop-filter: blur(var(--frost-blur));
        }

        /* Đảm bảo nội dung nằm trên lớp overlay */
        .liquid-glass-content {
            position: relative;
            z-index: 1;
            padding: inherit;
        }

        /* CSS cho các "cục nước trôi nổi" */
        .floating-blobs-container {
            position: fixed;
            inset: 0;
            z-index: 0;
            pointer-events: none;
            overflow: hidden;
            filter: blur(8px);
            /* Làm mờ nhẹ toàn bộ container blob */
        }

        .blob {
            position: absolute;
            /* Màu blob điều chỉnh để hiển thị trên nền trắng */
            background: radial-gradient(circle, rgba(150, 180, 255, 0.2) 0%, rgba(150, 180, 255, 0) 70%);
            border-radius: 50%;
            animation-duration: 20s;
            /* Tăng tốc độ animation */
            animation-iteration-count: infinite;
            animation-timing-function: ease-in-out;
            opacity: 0.9;
            /* Tăng opacity để rõ ràng hơn */
            will-change: transform, opacity;
            /* Tối ưu hóa hiệu suất animation */
        }

        /* Định nghĩa nhiều animation hơn cho blob */
        @keyframes float1 {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 0.8;
            }

            25% {
                transform: translate(28vw, 38vh) scale(1.3);
                opacity: 0.9;
            }

            50% {
                transform: translate(18vw, 68vh) scale(0.95);
                opacity: 0.7;
            }

            75% {
                transform: translate(48vw, 28vh) scale(1.2);
                opacity: 0.95;
            }

            100% {
                transform: translate(0, 0) scale(1);
                opacity: 0.8;
            }
        }

        @keyframes float2 {
            0% {
                transform: translate(0, 0) scale(0.9);
                opacity: 0.7;
            }

            30% {
                transform: translate(-22vw, 48vh) scale(1.2);
                opacity: 0.8;
            }

            60% {
                transform: translate(-12vw, 18vh) scale(1.0);
                opacity: 0.75;
            }

            100% {
                transform: translate(0, 0) scale(0.9);
                opacity: 0.7;
            }
        }

        @keyframes float3 {
            0% {
                transform: translate(0, 0) scale(1.2);
                opacity: 0.9;
            }

            40% {
                transform: translate(38vw, -28vh) scale(0.95);
                opacity: 0.8;
            }

            80% {
                transform: translate(18vw, -58vh) scale(1.3);
                opacity: 0.98;
            }

            100% {
                transform: translate(0, 0) scale(1.2);
                opacity: 0.9;
            }
        }

        @keyframes float4 {
            0% {
                transform: translate(0, 0) scale(1.0);
                opacity: 0.6;
            }

            50% {
                transform: translate(-28vw, -38vh) scale(1.2);
                opacity: 0.7;
            }

            100% {
                transform: translate(0, 0) scale(1.0);
                opacity: 0.6;
            }
        }

        @keyframes float5 {
            0% {
                transform: translate(0, 0) scale(1.3);
                opacity: 0.9;
            }

            35% {
                transform: translate(58vw, 18vh) scale(0.95);
                opacity: 0.78;
            }

            70% {
                transform: translate(28vw, -48vh) scale(1.2);
                opacity: 0.85;
            }

            100% {
                transform: translate(0, 0) scale(1.3);
                opacity: 0.9;
            }
        }

        @keyframes float6 {
            0% {
                transform: translate(0, 0) scale(0.8);
                opacity: 0.6;
            }

            45% {
                transform: translate(-38vw, 28vh) scale(1.1);
                opacity: 0.7;
            }

            90% {
                transform: translate(-18vw, -18vh) scale(0.9);
                opacity: 0.65;
            }

            100% {
                transform: translate(0, 0) scale(0.8);
                opacity: 0.6;
            }
        }

        /* Vị trí và kích thước ban đầu của các blob */
        .blob-1 {
            top: 10%;
            left: 5%;
            width: 300px;
            height: 300px;
            animation-name: float1;
            animation-duration: 25s;
            animation-delay: 0s;
        }

        .blob-2 {
            top: 50%;
            right: 10%;
            width: 220px;
            height: 220px;
            animation-name: float2;
            animation-duration: 20s;
            animation-delay: 5s;
        }

        .blob-3 {
            bottom: 20%;
            left: 15%;
            width: 380px;
            height: 380px;
            animation-name: float3;
            animation-duration: 28s;
            animation-delay: 10s;
        }

        .blob-4 {
            top: 30%;
            left: 40%;
            width: 160px;
            height: 160px;
            animation-name: float4;
            animation-duration: 18s;
            animation-delay: 2s;
        }

        .blob-5 {
            bottom: 5%;
            right: 5%;
            width: 280px;
            height: 280px;
            animation-name: float5;
            animation-duration: 23s;
            animation-delay: 7s;
        }

        .blob-6 {
            top: 70%;
            left: 60%;
            width: 200px;
            height: 200px;
            animation-name: float6;
            animation-duration: 21s;
            animation-delay: 12s;
        }

        .blob-7 {
            top: 15%;
            right: 25%;
            width: 250px;
            height: 250px;
            animation-name: float1;
            animation-duration: 26s;
            animation-delay: 3s;
        }

        .blob-8 {
            bottom: 30%;
            right: 30%;
            width: 180px;
            height: 180px;
            animation-name: float2;
            animation-duration: 19s;
            animation-delay: 8s;
        }

        .blob-9 {
            top: 60%;
            left: 5%;
            width: 270px;
            height: 270px;
            animation-name: float3;
            animation-duration: 24s;
            animation-delay: 15s;
        }

        .blob-10 {
            bottom: 10%;
            left: 50%;
            width: 220px;
            height: 220px;
            animation-name: float4;
            animation-duration: 22s;
            animation-delay: 1s;
        }

        .blob-11 {
            top: 5%;
            left: 70%;
            width: 350px;
            height: 350px;
            animation-name: float5;
            animation-duration: 29s;
            animation-delay: 6s;
        }

        .blob-12 {
            bottom: 40%;
            right: 40%;
            width: 170px;
            height: 170px;
            animation-name: float6;
            animation-duration: 17s;
            animation-delay: 11s;
        }

        .blob-13 {
            top: 20%;
            left: 80%;
            width: 190px;
            height: 190px;
            animation-name: float1;
            animation-duration: 20s;
            animation-delay: 4s;
        }

        .blob-14 {
            bottom: 15%;
            left: 70%;
            width: 260px;
            height: 260px;
            animation-name: float2;
            animation-duration: 23s;
            animation-delay: 9s;
        }

        .blob-15 {
            top: 40%;
            right: 5%;
            width: 290px;
            height: 290px;
            animation-name: float3;
            animation-duration: 27s;
            animation-delay: 14s;
        }

        .blob-16 {
            bottom: 50%;
            left: 45%;
            width: 130px;
            height: 130px;
            animation-name: float4;
            animation-duration: 16s;
            animation-delay: 0.5s;
        }

        .blob-17 {
            top: 25%;
            left: 15%;
            width: 150px;
            height: 150px;
            animation-name: float5;
            animation-duration: 24s;
            animation-delay: 2.5s;
        }

        .blob-18 {
            bottom: 25%;
            right: 15%;
            width: 210px;
            height: 210px;
            animation-name: float6;
            animation-duration: 26s;
            animation-delay: 7.5s;
        }

        .blob-19 {
            top: 45%;
            left: 55%;
            width: 100px;
            height: 100px;
            animation-name: float1;
            animation-duration: 18s;
            animation-delay: 10.5s;
        }

        .blob-20 {
            bottom: 35%;
            left: 35%;
            width: 190px;
            height: 190px;
            animation-name: float2;
            animation-duration: 20s;
            animation-delay: 13.5s;
        }


        /* Animation cho các phần tử UI khi cuộn */
        .animate-on-scroll {
            opacity: 0.2;
            /* Mặc định là mờ đi */
            transform: translateY(50px);
            /* Dịch chuyển nhẹ khi mờ */
            transition: opacity 1s cubic-bezier(0.25, 0.8, 0.25, 1), transform 1s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .animate-on-scroll.is-visible {
            opacity: 1;
            /* Rõ nét khi hiển thị */
            transform: translateY(0);
            /* Về vị trí ban đầu */
        }

        /* Các hiệu ứng slide-in cũng sẽ mờ đi khi không hiển thị */
        .animate-slide-in-left {
            opacity: 0.2;
            transform: translateX(-100px);
            transition: opacity 1s cubic-bezier(0.25, 0.8, 0.25, 1), transform 1s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .animate-slide-in-left.is-visible {
            opacity: 1;
            transform: translateX(0);
        }

        .animate-slide-in-right {
            opacity: 0.2;
            transform: translateX(100px);
            transition: opacity 1s cubic-bezier(0.25, 0.8, 0.25, 1), transform 1s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .animate-slide-in-right.is-visible {
            opacity: 1;
            transform: translateX(0);
        }

        /* Menubar styles */
        .menubar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 0.5rem 2rem;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom-left-radius: 40px;
            border-bottom-right-radius: 40px;
            border-top-left-radius: 0;
            border-top-right-radius: 0;
            box-shadow: 0px 5px 20px rgba(0, 0, 0, 0.1);
            /* Bóng đổ nhẹ hơn */
            transition: all 0.3s ease-in-out;
            perspective: 1000px;
            background-color: rgba(255, 255, 255, 0.8);
            /* Nền menubar sáng hơn */
        }

        .menubar .liquid-glass-overlay {
            border-bottom-left-radius: 40px;
            border-bottom-right-radius: 40px;
            border-top-left-radius: 0;
            border-top-right-radius: 0;
            background-color: rgba(var(--tint-color), 0.05);
            /* Overlay trong suốt hơn cho menubar */
        }

        .menubar-logo {
            display: flex;
            align-items: center;
        }

        .menubar-logo img {
            width: 375px;
            height: 49px;
            object-fit: contain;
        }

        .menubar-nav ul {
            display: flex;
            gap: 1.5rem;
            flex-wrap: nowrap;
        }

        .menubar-nav a {
            color: #333;
            /* Màu chữ tối hơn cho menu */
            font-weight: 500;
            font-size: 1rem;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            text-decoration: none;
            opacity: 0.8;
            white-space: nowrap;
            text-transform: capitalize;
            /* Viết hoa chữ cái đầu */
        }

        .menubar-nav a:hover {
            opacity: 1;
            text-shadow: 0 0 8px rgba(0, 0, 0, 0.2);
            /* Bóng chữ tối hơn */
        }

        .menubar-nav a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #3b82f6;
            /* Màu xanh nổi bật */
            transition: width 0.3s ease-in-out;
        }

        .menubar-nav a:hover::after {
            width: 100%;
        }

        /* Mobile Menu */
        .mobile-menu-button {
            background: none;
            border: none;
            color: #333;
            font-size: 2rem;
            cursor: pointer;
            display: none; /* Ẩn trên desktop theo mặc định */
        }

        .mobile-menu-overlay {
            /* Mặc định ẩn hoàn toàn trên mọi kích thước */
            display: none;
            visibility: hidden;
            pointer-events: none;
            transform: translateX(100%); /* Đảm bảo ẩn khỏi màn hình */
            transition: transform 0.3s ease-in-out;
        }

        @media (max-width: 767px) {
            .menubar-nav {
                display: none; /* Ẩn nav desktop trên mobile */
            }

            .mobile-menu-button {
                display: block; /* Hiện hamburger trên mobile */
            }

            .mobile-menu-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background-color: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(20px);
                -webkit-backdrop-filter: blur(20px);
                z-index: 1001;
                display: flex; /* Hiện lại trên mobile */
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }

            .mobile-menu-overlay.active {
                transform: translateX(0); /* Hiện ra */
                visibility: visible; /* Hiện hoàn toàn khi active */
                pointer-events: auto; /* Cho phép tương tác khi active */
            }

            .mobile-menu-overlay .close-button {
                position: absolute;
                top: 1rem; /* Giảm khoảng cách từ trên xuống */
                right: 1rem; /* Giảm khoảng cách từ phải sang */
                background: none;
                border: none;
                font-size: 2.5rem;
                color: #333;
                cursor: pointer;
                padding: 0.5rem; /* Tăng padding để dễ bấm hơn */
            }

            .mobile-menu-overlay ul {
                list-style: none;
                padding: 0;
                text-align: center;
            }

            .mobile-menu-overlay li {
                margin-bottom: 1.5rem;
            }

            .mobile-menu-overlay a {
                color: #333;
                font-size: 1.8rem;
                font-weight: 600;
                text-decoration: none;
                transition: color 0.2s ease;
            }

            .mobile-menu-overlay a:hover {
                color: #3b82f6;
            }
        }


        /* Styles cho phần chia đôi màn hình */
        .split-section {
            display: flex;
            flex-direction: column;
            /* Mặc định là cột trên mobile */
            gap: 2rem;
            padding: 2rem;
            text-align: center;
        }

        @media (min-width: 768px) {
            .split-section {
                flex-direction: row;
                /* Chia 2 cột trên desktop */
                text-align: left;
            }
        }

        .split-half {
            flex: 1;
            padding: 2rem;
            border-radius: 24px;
            background: rgba(0, 0, 0, 0.05);
            /* Nền trong suốt nhẹ cho nền trắng */
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease-in-out;
            color: #333;
            /* Màu chữ tối hơn */
        }

        .split-half:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .manager-avatar {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 1rem auto;
            /* Canh giữa avatar */
            border: 3px solid rgba(0, 0, 0, 0.2);
            /* Viền tối hơn */
            transition: transform 0.3s ease-in-out;
        }

        .manager-avatar:hover {
            transform: scale(1.1);
        }

        /* Styles riêng cho Studio Host */
        .host-avatar {
            width: 120px;
            /* Lớn hơn */
            height: 120px;
            border-width: 5px;
            /* Viền dày hơn */
            border-color: #3b82f6;
            /* Màu xanh nổi bật */
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
            /* Bóng đổ phát sáng */
        }

        .host-name {
            font-size: 2.5rem;
            /* Kích thước chữ lớn hơn */
            color: #3b82f6;
            /* Màu xanh nổi bật */
            text-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
            /* Bóng chữ phát sáng */
        }

        /* Other Managers in a single row - Carousel styles */
        .horizontal-scroll-container {
            display: flex;
            overflow-x: auto;
            /* Cho phép cuộn ngang */
            -webkit-overflow-scrolling: touch;
            /* Cuộn mượt trên iOS */
            gap: 1.5rem;
            /* Khoảng cách giữa các manager */
            padding-bottom: 1rem;
            /* Đủ không gian cho thanh cuộn */
            scrollbar-width: none; /* Ẩn thanh trượt cho Firefox */
        }

        /* Ẩn thanh trượt cho Webkit (Chrome, Safari) */
        .horizontal-scroll-container::-webkit-scrollbar {
            display: none;
        }

        .horizontal-scroll-container .manager-item {
            flex-shrink: 0;
            /* Ngăn các item co lại */
            width: 150px;
            /* Chiều rộng cố định cho mỗi manager item */
            text-align: center;
            padding: 1rem 0; /* Thêm padding để tạo khoảng trống */
        }


        /* Button special effects */
        .animated-button {
            position: relative;
            overflow: hidden;
            z-index: 1;
            /* Ensure the button's background and text are visible */
            background: inherit;
            color: inherit;
        }

        .animated-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(0, 0, 0, 0.1);
            /* Màu tối hơn cho hiệu ứng button trên nền trắng */
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.4s ease-out, height 0.4s ease-out;
            z-index: -1;
        }

        .animated-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .animated-button:active {
            transform: scale(0.98);
        }

        /* AI Chat Specific Styles */
        .ai-chat-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.7); /* Nền tối mờ */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 2000; /* Cao hơn mọi thứ */
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease-in-out;
        }

        .ai-chat-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .ai-chat-container {
            border-radius: 20px; /* Giảm bo tròn để trông gọn gàng hơn trên mobile */
            box-shadow: 0px 5px 20px rgba(0, 0, 0, 0.3); /* Giảm bóng đổ */
            border: 1px solid rgba(255, 255, 255, 0.2);
            background-color: rgba(255, 255, 255, 0.9);
            padding: 1rem; /* Giảm padding tổng thể */
            display: flex;
            flex-direction: column;
            width: 95%; /* Rộng hơn trên mobile */
            max-width: 600px; /* Giới hạn chiều rộng trên desktop */
            min-height: 450px; /* Giảm min-height */
            max-height: 95vh; /* Tối ưu chiều cao trên mobile */
            color: #333;
            position: relative; /* Dành cho nút đóng */
        }
        
        @media (min-width: 768px) {
            .ai-chat-container {
                border-radius: 40px;
                box-shadow: 0px 10px 30px rgba(0, 0, 0, 0.3);
                padding: 1.5rem;
                max-width: 700px;
                min-height: 500px;
                max-height: 90vh;
            }
        }

        .ai-chat-close-button {
            position: absolute;
            top: 0.5rem; /* Điều chỉnh vị trí nút X */
            right: 0.5rem; /* Điều chỉnh vị trí nút X */
            background: none;
            border: none;
            font-size: 1.8rem; /* Giảm kích thước nút X */
            color: #666;
            cursor: pointer;
            transition: color 0.2s ease;
            padding: 0.3rem; /* Thêm padding để dễ bấm */
        }

        .ai-chat-close-button:hover {
            color: #333;
        }

        .ai-chat-avatar-center {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 0.75rem; /* Giảm margin */
        }

        .ai-chat-avatar-center img {
            width: 80px; /* Giảm kích thước avatar */
            height: 80px; /* Giảm kích thước avatar */
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #3b82f6;
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5); /* Giảm bóng đổ */
        }

        .ai-chat-avatar-center p {
            font-size: 1.1rem; /* Giảm kích thước chữ */
            font-weight: bold;
            margin-top: 0.4rem; /* Giảm margin */
            color: #3b82f6;
        }


        .chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            padding-right: 0.5rem; /* Giảm padding để tránh thanh cuộn kép */
            margin-bottom: 0.75rem; /* Giảm margin */
            display: flex;
            flex-direction: column;
            gap: 0.6rem; /* Giảm khoảng cách giữa các tin nhắn */
        }

        .message-wrapper {
            display: flex;
            align-items: flex-end;
            gap: 0.4rem; /* Giảm khoảng cách giữa avatar và bubble */
        }

        .message-user .message-wrapper {
            justify-content: flex-end; /* Căn phải tin nhắn người dùng */
        }

        .message-ai .message-wrapper {
            justify-content: flex-start;
        }

        .message-avatar {
            width: 30px; /* Giảm kích thước avatar tin nhắn */
            height: 30px; /* Giảm kích thước avatar tin nhắn */
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
        }

        .message-bubble {
            padding: 0.6rem 0.9rem; /* Giảm padding bubble */
            border-radius: 1rem; /* Giảm bo tròn bubble */
            max-width: 75%; /* Tăng max-width để tận dụng không gian */
            word-wrap: break-word;
            flex-shrink: 1;
            color: #fff;
            position: relative;
            font-size: 0.95rem; /* Điều chỉnh kích thước font */
        }

        .message-user .message-bubble {
            background-color: #3b82f6;
            border-bottom-right-radius: 0.2rem; /* Giảm bo tròn góc dưới */
            text-align: right;
        }

        .message-ai .message-bubble {
            background-color: #10b981;
            border-bottom-left-radius: 0.2rem; /* Giảm bo tròn góc dưới */
            text-align: left;
        }
        
        /* Ensure newlines are respected */
        .message-text-content {
            white-space: pre-wrap;
        }

        .chat-input-area {
            display: flex;
            gap: 0.4rem; /* Giảm khoảng cách giữa các phần tử input */
            flex-wrap: wrap;
            align-items: center;
        }

        .chat-input-area input[type="text"] {
            flex-grow: 1;
            padding: 0.6rem 0.9rem; /* Giảm padding input */
            border-radius: 9999px;
            border: none;
            background-color: rgba(0, 0, 0, 0.1);
            color: #333;
            outline: none;
            transition: background-color 0.3s ease;
            min-width: 120px; /* Giảm min-width cho input */
            font-size: 0.95rem;
        }

        .chat-input-area input[type="text"]:focus {
            background-color: rgba(0, 0, 0, 0.15);
        }

        .chat-input-area button {
            width: 48px; /* Giảm kích thước nút */
            height: 48px; /* Giảm kích thước nút */
            padding: 0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            flex-shrink: 0;
        }
        
        @media (min-width: 768px) {
            .chat-input-area button {
                width: 60px;
                height: 60px;
            }
        }

        .chat-input-area button:hover {
            background-color: #2563eb;
            transform: translateY(-2px);
        }

        .chat-input-area button:active {
            transform: translateY(0);
        }

        /* Specific button colors */
        #sendMessageBtn {
            background-color: #3b82f6;
        }

        #sendMessageBtn:hover {
            background-color: #2563eb;
        }

        .image-upload-button {
            background-color: #4CAF50;
        }

        .image-upload-button:hover {
            background-color: #45a049;
        }


        .loading-indicator {
            text-align: center;
            padding: 0.5rem;
            font-style: italic;
            opacity: 0.7;
            color: #333;
        }

        .spam-warning {
            color: #d97706;
            text-align: center;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        /* Styles cho nút tải ảnh */
        .image-upload-wrapper {
            position: relative;
            display: inline-block;
        }

        .image-upload-button input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        .image-previews {
            display: flex;
            flex-wrap: wrap;
            gap: 0.6rem; /* Giảm gap */
            margin-top: 0.6rem; /* Giảm margin */
            max-height: 150px; /* Giảm max-height */
            overflow-y: auto;
            padding-bottom: 0.4rem; /* Giảm padding */
        }

        .image-preview-item {
            position: relative;
            width: 90px; /* Giảm kích thước ảnh preview */
            height: 90px; /* Giảm kích thước ảnh preview */
            border-radius: 6px; /* Giảm bo tròn */
            overflow: hidden;
            border: 1px solid rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
        }

        .image-preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .remove-image-btn {
            position: absolute;
            top: 1px; /* Điều chỉnh vị trí nút xóa */
            right: 1px; /* Điều chỉnh vị trí nút xóa */
            background-color: rgba(255, 0, 0, 0.7);
            color: white;
            border-radius: 50%;
            width: 18px; /* Giảm kích thước nút xóa */
            height: 18px; /* Giảm kích thước nút xóa */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem; /* Giảm kích thước font nút xóa */
            cursor: pointer;
            z-index: 10;
        }

        /* Main Gấu Gấu Button (on main page) */
        #gaugauMainBtn {
            background-color: #ef4444;
            color: white;
            border-radius: 50%;
            width: 90px; /* Increased size */
            height: 90px; /* Increased size */
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 10px rgba(239, 68, 68, 0.3);
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: fixed; /* Nút Live Chat cố định ở góc dưới bên phải */
            bottom: 2rem;
            right: 2rem;
            z-index: 1500; /* Đảm bảo nút này luôn ở trên cùng */
        }

        #gaugauMainBtn:hover {
            background-color: #dc2626;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(239, 68, 68, 0.4);
        }

        #gaugauMainBtn.active {
            background-color: #10b981;
            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
            }
        }

        #gaugauMainBtn img {
            width: 50px; /* Avatar size within button */
            height: 50px; /* Avatar size within button */
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 4px; /* Space between image and text */
        }

        #gaugauMainBtn .text {
            font-size: 0.8rem; /* Slightly larger text */
            line-height: 1;
            font-weight: bold; /* Make text bold */
        }

        /* Nút bật/tắt mic trong chat */
        #micToggleBtn {
            background-color: #f59e0b; /* Màu cam */
            color: white;
            border-radius: 50%;
            width: 48px; /* Giảm kích thước nút */
            height: 48px; /* Giảm kích thước nút */
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 1.8rem; /* Giảm kích thước emoji mic */
        }
        
        @media (min-width: 768px) {
            #micToggleBtn {
                width: 60px;
                height: 60px;
                font-size: 2rem;
            }
        }

        #micToggleBtn.active {
            background-color: #10b981; /* Màu xanh khi active */
        }

        #micToggleBtn:hover {
            background-color: #d97706;
            transform: translateY(-2px);
        }

        /* Nút đọc tin nhắn (Text-to-Speech) */
        .read-message-btn {
            position: absolute;
            bottom: 2px; /* Điều chỉnh vị trí nút đọc */
            right: 2px; /* Điều chỉnh vị trí nút đọc */
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            width: 20px; /* Giảm kích thước nút đọc */
            height: 20px; /* Giảm kích thước nút đọc */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s ease, background-color 0.2s ease;
            font-size: 0.8rem; /* Kích thước font cho emoji loa */
            line-height: 1; /* Đảm bảo emoji căn giữa */
            z-index: 2; /* Đảm bảo nút nằm trên các phần tử khác */
        }

        .read-message-btn:hover {
            opacity: 1;
            background-color: rgba(255, 255, 255, 0.5);
        }

        /* Highlight cho từ đang đọc */
        .highlight-word {
            background-color: #ffeb3b;
            color: #333;
            border-radius: 4px;
            padding: 2px 4px;
            margin: -2px -4px;
            transition: background-color 0.1s ease-in-out, color 0.1s ease-in-out;
            display: inline-block;
        }

        /* Thumbnail dự án nổi bật */
        .project-thumbnail {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 16px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Styles cho khối mã Scratch */
        .scratch-code-block {
            display: block;
            padding: 0.75rem 1rem; /* Tăng padding */
            border-radius: 0.75rem; /* Bo tròn góc nhiều hơn */
            margin-top: 0.75rem;
            margin-bottom: 0.75rem;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap; /* Giữ nguyên khoảng trắng và xuống dòng */
            word-break: break-all;
            color: white; /* Mặc định chữ trắng */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); /* Bóng đổ */
        }

        /* Màu sắc các khối Scratch */
        .scratch-code-block.motion { background-color: #4C97FF; } /* Xanh dương */
        .scratch-code-block.looks { background-color: #9966FF; } /* Tím */
        .scratch-code-block.sound { background-color: #D42D7A; } /* Hồng đậm */
        .scratch-code-block.event { background-color: #FFD500; } /* Vàng */
        .scratch-code-block.control { background-color: #FFAB19; } /* Cam */
        .scratch-code-block.sensing { background-color: #5CB1D6; } /* Xanh nhạt */
        .scratch-code-block.operators { background-color: #33CC33; } /* Xanh lá */
        .scratch-code-block.variables { background-color: #FF8C1A; } /* Cam đỏ */
        .scratch-code-block.my_blocks { background-color: #FF6680; } /* Đỏ hồng */
        .scratch-code-block.default { background-color: #333; } /* Mặc định cho code thường */

        /* Style cho hyperlink */
        .message-bubble a {
            color: #3b82f6; /* Màu xanh cho link */
            text-decoration: underline;
            transition: color 0.2s ease;
        }
        .message-bubble a:hover {
            color: #2563eb;
        }

        /* Page content styles */
        .page-content {
            display: none; /* Hidden by default */
            width: 100%;
            max-width: 6xl;
            margin: 0 auto;
            padding: 1rem;
            min-height: 70vh; /* Ensure pages have some height */
        }
        .page-content.active {
            display: block; /* Show active page */
        }

        /* Detailed Manager Page Specific Styles */
        .manager-detail-card {
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        .manager-detail-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        .manager-detail-card img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid #3b82f6;
            margin-bottom: 1rem;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
        }
        
        /* Notification Card Styles */
        .notification-card {
            background-color: #f0f9ff; /* Light blue background */
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            color: #333; /* Dark text for light background */
            border: 1px solid #e0f2fe; /* Light border */
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .notification-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .notification-card h3 {
            font-size: 1.75rem; /* Larger title */
            font-weight: 700; /* Bolder title */
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: #1e3a8a; /* Darker blue for title */
        }

        .notification-card p {
            font-size: 1.1rem; /* Slightly larger body text */
            line-height: 1.6;
            color: #555;
            flex-grow: 1; /* Allow paragraph to take available space */
        }

        .notification-card .date {
            font-size: 0.9rem;
            color: #888;
            margin-top: 1rem;
            font-style: italic;
        }

        .notification-card img {
            width: 100%;
            max-width: 200px; /* Max width for images in notification card */
            height: auto;
            border-radius: 8px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Footer Styles */
        .main-footer {
            background-color: #f8f8f8; /* Light gray background */
            padding: 2rem 1rem;
            border-top: 1px solid #e0e0e0;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 1.5rem;
            margin-top: 3rem; /* Space from content above */
        }

        .main-footer-logo img {
            width: 250px; /* Adjust logo size */
            height: auto;
            margin-bottom: 1rem;
        }

        .main-footer-nav ul {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            list-style: none;
            padding: 0;
        }

        @media (min-width: 768px) {
            .main-footer-nav ul {
                flex-direction: row;
                gap: 2rem;
            }
        }

        .main-footer-nav a {
            color: #555;
            font-weight: 500;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .main-footer-nav a:hover {
            color: #3b82f6;
        }

        .footer-copyright {
            color: #777;
            font-size: 0.9rem;
            margin-top: 1rem;
        }

        /* Content Pages (Privacy Policy, Terms of Service) */
        .content-page {
            background-color: #ffffff;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            margin-top: 2rem;
            text-align: left;
        }

        .content-page h2 {
            font-size: 2.5rem;
            font-weight: bold;
            color: #1e3a8a;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .content-page h3 {
            font-size: 1.75rem;
            font-weight: 600;
            color: #3b82f6;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        .content-page p {
            font-size: 1.1rem;
            line-height: 1.7;
            color: #444;
            margin-bottom: 1rem;
        }

        .content-page ul {
            list-style: disc;
            padding-left: 1.5rem;
            margin-bottom: 1rem;
        }

        .content-page li {
            margin-bottom: 0.5rem;
            color: #444;
        }

        /* New styles for enhanced Notification Cards */
        .notification-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        @media (min-width: 640px) { /* sm breakpoint */
            .notification-grid {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            }
        }

        @media (min-width: 1024px) { /* lg breakpoint */
            .notification-grid {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            }
        }

        .notification-card {
            position: relative;
            overflow: hidden;
            background-color: #fefefe; /* Lighter background for cards */
            border: 1px solid #e0e0e0;
            transition: all 0.3s ease-in-out;
            transform: translateY(20px);
            opacity: 0;
            animation: fadeInSlideUp 0.6s ease-out forwards;
        }

        .notification-card:nth-child(1) { animation-delay: 0.1s; }
        .notification-card:nth-child(2) { animation-delay: 0.2s; }
        .notification-card:nth-child(3) { animation-delay: 0.3s; }
        .notification-card:nth-child(4) { animation-delay: 0.4s; }
        .notification-card:nth-child(5) { animation-delay: 0.5s; }
        /* Add more for more cards */

        @keyframes fadeInSlideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .notification-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, #3b82f6, #10b981); /* Gradient top border */
            transform: translateY(-100%);
            transition: transform 0.3s ease-out;
        }

        .notification-card:hover::before {
            transform: translateY(0);
        }

        .notification-card h3 {
            position: relative;
            z-index: 1;
        }

        .notification-card .icon {
            font-size: 2.5rem; /* Larger icon */
            margin-bottom: 0.75rem;
            color: #3b82f6; /* Icon color */
        }

        /* New styles for enhanced Manager Detail Page */
        .team-intro-section {
            background-color: #f8f8f8;
            padding: 3rem 2rem;
            border-radius: 20px;
            margin-bottom: 3rem;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            text-align: center;
        }

        .team-intro-section h2 {
            font-size: 3rem;
            font-weight: 800;
            color: #1e3a8a;
            margin-bottom: 1rem;
        }

        .team-intro-section p {
            font-size: 1.2rem;
            line-height: 1.8;
            color: #555;
            max-width: 800px;
            margin: 0 auto;
        }

        .manager-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        @media (min-width: 768px) {
            .manager-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .manager-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .manager-detail-card {
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
            padding: 2.5rem;
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease-in-out;
            transform: translateY(20px);
            opacity: 0;
            animation: fadeInSlideUp 0.6s ease-out forwards;
        }

        .manager-detail-card:nth-child(1) { animation-delay: 0.1s; }
        .manager-detail-card:nth-child(2) { animation-delay: 0.2s; }
        .manager-detail-card:nth-child(3) { animation-delay: 0.3s; }
        .manager-detail-card:nth-child(4) { animation-delay: 0.4s; }
        .manager-detail-card:nth-child(5) { animation-delay: 0.5s; }
        .manager-detail-card:nth-child(6) { animation-delay: 0.6s; }
        .manager-detail-card:nth-child(7) { animation-delay: 0.7s; }
        .manager-detail-card:nth-child(8) { animation-delay: 0.8s; }
        .manager-detail-card:nth-child(9) { animation-delay: 0.9s; }


        .manager-detail-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 7px;
            background: linear-gradient(to right, #3b82f6, #10b981);
            transform: translateY(-100%);
            transition: transform 0.3s ease-out;
        }

        .manager-detail-card:hover::before {
            transform: translateY(0);
        }

        .manager-detail-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .manager-detail-card.host-card {
            border: 2px solid #3b82f6;
            box-shadow: 0 0 25px rgba(59, 130, 246, 0.4);
            background-color: #e3f2fd; /* Light blue background for host */
        }

        .manager-detail-card.host-card:hover {
            box-shadow: 0 0 35px rgba(59, 130, 246, 0.6);
        }

        .manager-detail-card.host-card::before {
            background: linear-gradient(to right, #1e3a8a, #3b82f6);
        }

        .manager-detail-card h3 {
            font-size: 2.2rem; /* Larger name */
            margin-bottom: 0.5rem;
        }

        .manager-detail-card .role {
            font-size: 1.1rem;
            font-weight: 600;
            color: #666;
            margin-bottom: 1rem;
        }

        .manager-detail-card p {
            font-size: 1rem;
            line-height: 1.6;
            color: #555;
        }
        #gaugauBubbleChat {
          position: fixed;
          bottom: 110px; /* ngay trên nút Gấu Gấu, chỉnh lại nếu cần */
          right: 32px;
          width: 310px;
          background: white;
          border-radius: 20px;
          box-shadow: 0 8px 28px rgba(0,0,0,0.18);
          z-index: 2000;
          animation: fadeInBubble 0.3s;
        }
@keyframes fadeInBubble {
  from { opacity: 0; transform: scale(0.95);}
  to { opacity: 1; transform: scale(1);}
}
    </style>
</head>

<body>
    <!-- Facebook SDK Script should be placed right after the <body> tag -->
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v12.0" nonce="1W4pKFLk"></script>

    <!-- Các "cục nước trôi nổi" làm nền -->
    <div class="floating-blobs-container">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
        <div class="blob blob-4"></div>
        <div class="blob blob-5"></div>
        <div class="blob blob-6"></div>
        <div class="blob blob-7"></div>
        <div class="blob blob-8"></div>
        <div class="blob blob-9"></div>
        <div class="blob blob-10"></div>
        <div class="blob blob-11"></div>
        <div class="blob blob-12"></div>
        <div class="blob blob-13"></div>
        <div class="blob blob-14"></div>
        <div class="blob blob-15"></div>
        <div class="blob blob-16"></div>
        <div class="blob blob-17"></div>
        <div class="blob blob-18"></div>
        <div class="blob blob-19"></div>
        <div class="blob blob-20"></div>
    </div>

    <!-- Menubar -->
    <header class="menubar liquid-glass-container">
        <div class="liquid-glass-overlay"></div>
        <div class="liquid-glass-content flex justify-between items-center w-full">
            <div class="menubar-logo">
                <img src="https://i.postimg.cc/x87pGPGS/PNG-2.png" alt="Studio Dự Án Người Việt Logo">
            </div>
            <nav class="menubar-nav hidden md:flex"> <!-- Ẩn trên mobile, hiện trên desktop -->
                <ul>
                    <li><a href="#home" data-page="home">Trang Chủ</a></li>
                    <li><a href="#thongbao" data-page="thongbao">Thông báo</a></li>
                    <li><a href="#manager" data-page="manager">Ban Quản Lý</a></li>
                </ul>
            </nav>
            <button class="mobile-menu-button md:hidden" id="mobileMenuButton">
                ☰
            </button>
        </div>
    </header>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay" id="mobileMenuOverlay">
        <button class="close-button" id="closeMobileMenu">X</button>
        <ul>
            <li><a href="#home" data-page="home">Trang Chủ</a></li>
            <li><a href="#thongbao" data-page="thongbao">Thông báo</a></li>
            <li><a href="#manager" data-page="manager">Ban Quản Lý</a></li>
        </ul>
    </div>

    <!-- Main Content Area - Contains all pages -->
    <main class="w-full max-w-6xl mx-auto p-4 md:p-8 space-y-16 z-20 mt-16">

        <!-- Trang Chủ -->
        <div id="page-home" class="page-content active">
            <!-- Hero Section -->
            <section id="hero" class="liquid-glass-container p-8 md:p-12 text-center animate-on-scroll">
                <div class="liquid-glass-overlay"></div>
                <div class="liquid-glass-content">
                    <h1 class="text-4xl md:text-6xl font-extrabold mb-4" style="line-height: 1.2;">
                        Chào mừng bạn đến với <br><span class="text-blue-600">Studio Dự Án Người Việt!</span>
                    </h1>
                    <p class="text-lg md:text-xl max-w-3xl mx-auto mb-8 opacity-90">
                        Nơi phát triển, ủng hộ, quảng bá các dự án lập trình Việt Nam, chú trọng các dự án do người Việt sáng tạo.
                    </p>
                    <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                        <button onclick="window.open('https://scratch.mit.edu/studios/33509364', '_blank')"
                            class="px-8 py-4 bg-blue-500 text-white font-bold text-lg rounded-full shadow-lg hover:bg-blue-600 transition-colors duration-300 transform hover:scale-105 animated-button">
                            Tham gia Studio ngay!
                        </button>
                        <button onclick="window.open('https://discord.gg/6hkPzynTgt', '_blank')"
                            class="px-8 py-4 bg-indigo-600 text-white font-bold text-lg rounded-full shadow-lg hover:bg-indigo-700 transition-colors duration-300 transform hover:scale-105 animated-button flex items-center gap-2">
                            <img src="https://static.vecteezy.com/system/resources/previews/023/986/880/non_2x/discord-logo-discord-logo-transparent-discord-icon-transparent-free-free-png.png"
                                alt="Discord Logo" class="h-6 w-6">
                            Tham gia Discord
                        </button>
                    </div>
                </div>
            </section>

            <!-- Giới thiệu & Lời nói đầu -->
            <section id="gioi-thieu" class="p-8 md:p-12 text-center bg-transparent animate-on-scroll mt-16">
                <h2 class="text-3xl md:text-4xl font-bold mb-8">Lời Nói Đầu</h2>
                <p class="opacity-80 text-lg max-w-3xl mx-auto">
                    Studio này nhằm mục đích phát triển, ủng hộ, quảng bá các dự án lập trình Việt Nam, chú trọng các dự án do
                    người Việt sáng tạo. Chúng tôi tin rằng mỗi dự án Scratch là một hạt giống sáng tạo, và với sự hỗ trợ đúng
                    đắn, chúng có thể nảy mầm thành những tác phẩm tuyệt vời.
                </p>
                <p class="opacity-80 text-lg max-w-3xl mx-auto mt-4">
                    ✌️✨ Đội ngũ Managers của chúng tôi luôn thân thiện, nhiệt tình và sẵn sàng giúp đỡ bạn trong hành trình sáng
                    tạo trên Scratch. Hãy cùng nhau xây dựng một cộng đồng vững mạnh và đầy cảm hứng!
                </p>
            </section>

            <!-- Sinh Nhật Studio & Trích Dẫn -->
            <section id="sinh-nhat-trich-dan" class="split-section animate-on-scroll mt-16">
                <div class="split-half animate-slide-in-left">
                    <h3 class="text-3xl font-bold mb-4">Sinh Nhật Studio</h3>
                    <p class="text-5xl font-extrabold text-blue-600 mb-4">15/06/2023</p>
                    <p class="text-lg opacity-80">
                        Kỷ niệm ngày ra đời của Studio Dự Án Người Việt, nơi ươm mầm những tài năng lập trình trẻ.
                    </p>
                </div>
                <div class="split-half animate-slide-in-right">
                    <h3 class="text-3xl font-bold mb-4">Sáng tạo...</h3>
                    <p class="text-2xl italic mb-4">
                        "Sáng tạo là sự thông minh có chứa đựng óc hài hước"
                    </p>
                    <p class="font-semibold text-xl">- Albert Einstein</p>
                    <p class="text-lg opacity-80 mt-4">
                        Hãy luôn giữ tinh thần sáng tạo và đừng quên thêm chút hài hước vào các dự án của bạn!
                    </p>
                </div>
            </section>


            <!-- Dự án nổi bật -->
            <section id="du-an-noi-bat" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-16">
                <h2 class="col-span-full text-3xl md:text-4xl font-bold mb-4 text-center animate-on-scroll">SIÊU NỔI BẬT ⭐</h2>
                <div class="liquid-glass-container p-6 text-center animate-on-scroll animate-delay-200">
                    <div class="liquid-glass-overlay"></div>
                    <div class="liquid-glass-content">
                        <img src="https://i.ibb.co/8LCN4NKX/1154145707-282x210.png" alt="Thumbnail Dead rails"
                            class="project-thumbnail mx-auto">
                        <h3 class="text-2xl font-bold mb-2">⛰️ Dead rails</h3>
                        <p class="opacity-80 mb-4">Một dự án Scratch sáng tạo với đường ray và thây ma.</p>
                        <a href="https://scratch.mit.edu/projects/1154145707/" target="_blank"
                            class="text-blue-600 hover:text-blue-800 transition-colors duration-200">Xem dự án</a>
                    </div>
                </div>
                <div class="liquid-glass-container p-6 text-center animate-on-scroll animate-delay-400">
                    <div class="liquid-glass-overlay"></div>
                    <div class="liquid-glass-content">
                        <img src="https://i.ibb.co/b5Nc7sp3/PNG-2.png" alt="Thumbnail AI LÀ NGHÌN PHÚ"
                            class="project-thumbnail mx-auto">
                        <h3 class="text-2xl font-bold mb-2">⛲️ AI LÀ NGHÌN PHÚ</h3>
                        <p class="opacity-80 mb-4">Trò chơi đố vui trí tuệ đặc trưng trên truyền hình.</p>
                        <a href="https://scratch.mit.edu/projects/1067950299" target="_blank"
                            class="text-blue-600 hover:text-blue-800 transition-colors duration-200">Xem dự án</a>
                    </div>
                </div>
                <div class="liquid-glass-container p-6 text-center animate-on-scroll animate-delay-600">
                    <div class="liquid-glass-overlay"></div>
                    <div class="liquid-glass-content">
                        <img src="https://i.ibb.co/PzrM5C9L/image.png" alt="Thumbnail Grace - Roblox V0.1.4"
                            class="project-thumbnail mx-auto">
                        <h3 class="text-2xl font-bold mb-2">⛽️ Grace - Roblox V0.1.4</h3>
                        <p class="opacity-80 mb-4">Phiên bản Roblox độc đáo trên Scratch.</p>
                        <a href="https://scratch.mit.edu/projects/1119305171" target="_blank"
                            class="text-blue-600 hover:text-blue-800 transition-colors duration-200">Xem dự án</a>
                    </div>
                </div>
                <div class="liquid-glass-container p-6 text-center animate-on-scroll animate-delay-800">
                    <div class="liquid-glass-overlay"></div>
                    <div class="liquid-glass-content">
                        <img src="https://i.ibb.co/R4s3VS8x/PNG-2.png" alt="Thumbnail Grow A Garden (Roblox) v.5.0"
                            class="project-thumbnail mx-auto">
                        <h3 class="text-2xl font-bold mb-2">Grow A Garden (Roblox) v.5.0</h3>
                        <p class="opacity-80 mb-4">Trải nghiệm làm vườn theo phong cách Roblox.</p>
                        <a href="https://scratch.mit.edu/projects/1188197959/" target="_blank"
                            class="text-blue-600 hover:text-blue-800 transition-colors duration-200">Xem dự án</a>
                    </div>
                </div>
                <div class="liquid-glass-container p-6 text-center animate-on-scroll animate-delay-1000">
                    <div class="liquid-glass-overlay"></div>
                    <div class="liquid-glass-content">
                        <img src="https://i.ibb.co/4nRCCN9S/PNG-2.png" alt="Thumbnail Lootify V1.3"
                            class="project-thumbnail mx-auto">
                        <h3 class="text-2xl font-bold mb-2">⚔️ Lootify V1.3 ☁(save and load)</h3>
                        <p class="opacity-80 mb-4">Game phiêu lưu đặc trưng thể loại mới.</p>
                        <a href="https://scratch.mit.edu/projects/1192996259/" target="_blank"
                            class="text-blue-600 hover:text-blue-800 transition-colors duration-200">Xem dự án</a>
                    </div>
                </div>
            </section>

            <!-- Quy định Tuân thủ -->
            <section id="quy-dinh" class="liquid-glass-container p-8 md:p-12 animate-on-scroll mt-24"> <!-- Added mt-24 -->
                <div class="liquid-glass-overlay"></div>
                <div class="liquid-glass-content">
                    <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center">☘️[-Tuân Thủ-]✨</h2>
                    <ul class="list-disc list-inside space-y-3 text-lg opacity-90 max-w-4xl mx-auto text-left">
                        <li>⛺️ Có thể thêm các chương trình Việt Nam và các quốc gia khác.</li>
                        <li>✋ Nghiêm cấm dự án, bình luận thô tục và vi phạm thuần phong mỹ tục.</li>
                        <li>♨️ Vui lòng mỗi tài khoản chỉ đăng tối đa 4 dự án/ 1 ngày (Tránh việc trôi dự án của các Scratcher
                            khác)</li>
                        <li>✉️ Hãy hạn chế các hoạt động quảng cáo.</li>
                        <li>⛱️ Người tham gia là người Việt hoặc có thể là người nước ngoài cùng giao lưu. (Studio accepts
                            foreigners)</li>
                        <li>✔️ Chúng tôi chấp nhận các ý kiến và đóng góp của bạn tại phần Bình luận studio.</li>
                        <li>⚙️ Các nội dung vi phạm sẽ bị xóa.</li>
                    </ul>
                </div>
            </section>

            <!-- Lưu ý quan trọng -->
            <section id="luu-y" class="p-8 md:p-12 text-center bg-transparent animate-on-scroll mt-16">
                <h2 class="text-3xl md:text-4xl font-bold mb-8">⚠️[-Lưu Ý-]⚡️</h2>
                <ul class="list-disc list-inside space-y-3 text-lg opacity-90 max-w-3xl mx-auto text-left">
                    <li>⚙️ Đội ngũ Managers studio sẽ kiểm tra MỖI NGÀY và xóa các chương trình vi phạm.</li>
                    <li>❗️ Các vi phạm của thành viên studio sẽ bị trừ vào Điểm đánh giá.</li>
                    <li>⚡️ >10 điểm đánh giá sẽ bị loại.</li>
                    <li>⚠️ Bất kì báo cáo nào vui lòng gửi về bình luận tại studio để được xử lí.</li>
                </ul>
            </section>

            <!-- Ban Quản lý Studio (Overview on Homepage) -->
            <section id="ban-quan-ly" class="liquid-glass-container p-6 md:p-8 animate-on-scroll mt-16">
                <div class="liquid-glass-overlay"></div>
                <div class="liquid-glass-content">
                    <h2 class="text-2xl md:text-3xl font-bold mb-6 text-center">♥️ Đội Ngũ Manager</h2>

                    <div class="text-center mb-8 animate-on-scroll animate-delay-200">
                        <a href="https://scratch.mit.edu/users/lunavocado/" target="_blank" class="block">
                            <img src="https://cdn2.scratch.mit.edu/get_image/user/124521217_90x90.png" alt="lunavocado Avatar"
                                class="manager-avatar host-avatar mx-auto mb-2">
                            <p class="font-extrabold host-name text-2xl md:text-3xl mb-1">lunavocado</p>
                        </a>
                    </div>

                    <h3 class="text-xl md:text-2xl font-bold mb-4 text-center animate-on-scroll animate-delay-400">Các Manager khác</h3>
                    <!-- Updated Manager Section with Horizontal Scroll -->
                    <div class="horizontal-scroll-container">
                        <div class="manager-item">
                            <a href="https://scratch.mit.edu/users/Fleiroscracth/" target="_blank" class="block">
                                <img src="https://cdn2.scratch.mit.edu/get_image/user/124495990_90x90.png"
                                    alt="Fleiroscracth Avatar" class="manager-avatar mx-auto mb-2">
                                <p class="text-base font-semibold">Fleiroscracth</p>
                            </a>
                        </div>
                        <div class="manager-item">
                            <a href="https://scratch.mit.edu/users/StudioDANV/" target="_blank" class="block">
                                <img src="https://uploads.scratch.mit.edu/get_image/user/149945770_90x90.png"
                                    alt="StudioDANV Avatar" class="manager-avatar mx-auto mb-2">
                                <p class="text-base font-semibold">StudioDANV</p>
                            </a>
                        </div>
                        <div class="manager-item">
                            <a href="https://scratch.mit.edu/users/ngw--/" target="_blank" class="block">
                                <img src="https://cdn2.scratch.mit.edu/get_image/user/133312821_90x90.png" alt="ngw-- Avatar"
                                class="manager-avatar mx-auto mb-2">
                                <p class="text-base font-semibold">ngw--</p>
                            </a>
                        </div>
                        <div class="manager-item">
                            <a href="https://scratch.mit.edu/users/Nhienzcute/" target="_blank" class="block">
                                <img src="https://cdn2.scratch.mit.edu/get_image/user/133904533_90x90.png"
                                    alt="Nhienzcute Avatar" class="manager-avatar mx-auto mb-2">
                                <p class="text-base font-semibold">Nhienzcute</p>
                            </a>
                        </div>
                        <div class="manager-item">
                            <a href="https://scratch.mit.edu/users/ArchionTechno/" target="_blank" class="block">
                                <img src="https://cdn2.scratch.mit.edu/get_image/user/148565311_90x90.png"
                                    alt="ArchionTechno Avatar" class="manager-avatar mx-auto mb-2">
                                <p class="text-base font-semibold">ArchionTechno</p>
                            </a>
                        </div>
                        <div class="manager-item">
                            <a href="https://scratch.mit.edu/users/-Nooto-/" target="_blank" class="block">
                                <img src="https://cdn2.scratch.mit.edu/get_image/user/158801952_60x60.png"
                                    alt="-Nooto- Avatar" class="manager-avatar mx-auto mb-2">
                                <p class="text-base font-semibold">-Nooto-</p>
                            </a>
                        </div>
                        <div class="manager-item">
                            <a href="https://scratch.mit.edu/users/-DTH-/" target="_blank" class="block"> 
                                <img src="https://cdn2.scratch.mit.edu/get_image/user/158755501_60x60.png"
                                    alt="-DTH- Avatar" class="manager-avatar mx-auto mb-2">
                                <p class="text-base font-semibold">-DTH-</p>
                            </a>
                        </div>
                        <!-- Updated _-Zipper-_ Avatar -->
                        <div class="manager-item">
                            <a href="https://scratch.mit.edu/users/_-Zipper-_/" target="_blank" class="block">
                                <img src="https://uploads.scratch.mit.edu/get_image/user/158172449_128x128.png"
                                    alt="_-Zipper-_ Avatar" class="manager-avatar mx-auto mb-2">
                                <p class="text-base font-semibold">_-Zipper-_</p>
                            </a>
                        </div>
                    </div>
                    <p class="text-base md:text-lg max-w-3xl mx-auto mt-6 opacity-90 text-center">
                        Duy Trì Bởi ❤️ Đội Ngũ Manager
                    </p>
                </div>
            </section>

            <!-- Tham gia ngay Section -->
            <section id="tham-gia" class="liquid-glass-container p-8 md:p-12 text-center animate-on-scroll mt-24"> <!-- Added mt-24 -->
                <div class="liquid-glass-overlay"></div>
                <div class="liquid-glass-content">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">Sẵn sàng khám phá và sáng tạo?</h2>
                    <p class="text-lg md:text-xl max-w-2xl mx-auto mb-8 opacity-90">
                        Tham gia cộng đồng của chúng tôi ngay hôm nay và cùng nhau phát triển các dự án Scratch tuyệt vời!
                    </p>
                    <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                        <button onclick="window.open('https://scratch.mit.edu/studios/33509364', '_blank')"
                            class="px-8 py-4 bg-blue-500 text-white font-bold text-lg rounded-full shadow-lg hover:bg-blue-600 transition-colors duration-300 transform hover:scale-105 animated-button">
                            Đến Studio trên Scratch
                        </button>
                        <button onclick="window.open('https://discord.gg/6hkPzynTgt', '_blank')"
                            class="px-8 py-4 bg-indigo-600 text-white font-bold text-lg rounded-full shadow-lg hover:bg-indigo-700 transition-colors duration-300 transform hover:scale-105 animated-button flex items-center gap-2">
                            <img src="https://static.vecteezy.com/system/resources/previews/023/986/880/non_2x/discord-logo-discord-logo-transparent-discord-icon-transparent-free-free-png.png"
                                alt="Discord Logo" class="h-6 w-6">
                            Tham gia Discord
                        </button>
                    </div>
                </div>
            </section>

            <!-- Facebook Comments Section -->
            <section id="danh-gia" class="liquid-glass-container p-8 md:p-12 animate-on-scroll mt-16">
                <div class="liquid-glass-overlay"></div>
                <div class="liquid-glass-content text-center">
                    <h2 class="text-3xl md:text-4xl font-bold mb-8" style="color: #333;">Đánh Giá và Bình Luận</h2>
                    <p class="text-lg md:text-xl max-w-2xl mx-auto mb-8 opacity-90" style="color: #333;">
                        Hãy để lại ý kiến của bạn về Studio Dự Án Người Việt nhé!
                    </p>
                    <!-- Facebook Comments Plugin -->
                    <div class="fb-comments" data-href="https://danvpr.github.io/studiodanv/" data-width="100%" data-numposts="5"></div>
                </div>
            </section>
        </div>

        <!-- Trang Thông báo -->
        <div id="page-thongbao" class="page-content">
            <section class="liquid-glass-container p-8 md:p-12 text-center">
                <div class="liquid-glass-overlay"></div>
                <div class="liquid-glass-content">
                    <h2 class="text-3xl md:text-4xl font-bold mb-8">📢 Thông Báo Mới Nhất 📢</h2>
                    <div class="notification-grid">
                        <div class="notification-card">
                            <span class="icon">✨</span>
                            <img src="https://cdn2.scratch.mit.edu/get_image/project/1208424544_144x108.png" alt="Cập Nhật Quy Định">
                            <h3>Hưởng Ứng CMT8</h3>
                            <p>
                                Các bạn Scratcher Việt Nam tại Studio Dự Án Người Việt đã tham gia sự kiện đặt ảnh nền Avatar cùng Gấu Gấu, hưởng ứng sự kiện kỉ niệm CMT8.
                            </p>
                            <p class="date">Ngày đăng: 10/07/2025</p>
                            <button onclick="alert('https://scratch.mit.edu/projects/1208424544/')" class="mt-4 px-6 py-2 bg-blue-500 text-white font-semibold rounded-full hover:bg-blue-600 transition-colors duration-200">
                                Xem chi tiết
                            </button>
                        </div>
                        <div class="notification-card">
                            <span class="icon">🎉</span>
                            <img src="https://i.postimg.cc/3Nh2s5f0/image.png" alt="Chào Mừng 80 Năm Ngày Cách Mạng Tháng Tám và Quốc Khánh">
                            <h3>Chào Mừng 80 Năm Ngày Cách Mạng Tháng Tám và Quốc Khánh</h3>
                            <p>
                                Việt Nam đang chuẩn bị kỷ niệm 80 năm Cách mạng Tháng Tám (19/8/1945-19/8/2025) và Quốc khánh (2/9/1945-2/9/2025) vào năm 2025 với nhiều hoạt động ý nghĩa, bao gồm Lễ kỷ niệm chính thức, diễu binh, diễu hành, lễ khởi công, khánh thành các công trình, và các chương trình nghệ thuật lớn. Lễ kỷ niệm chính thức và diễu binh, diễu hành sẽ diễn ra vào ngày 2 tháng 9 năm 2025 tại Hà Nội, đánh dấu một cột mốc lịch sử quan trọng của đất nước. 
                            </p>
                            <p class="date">Ngày đăng: 01/07/2025</p>
                            <button onclick="alert('https://scratch.mit.edu/studios/33509364/comments')" class="mt-4 px-6 py-2 bg-blue-500 text-white font-semibold rounded-full hover:bg-blue-600 transition-colors duration-200">
                                Xem chi tiết
                            </button>
                        </div>
                        <div class="notification-card">
                            <span class="icon">🤝</span>
                            <img src="https://cdn2.scratch.mit.edu/get_image/project/1206261850_144x108.png" alt="Tuyển Thêm Manager">
                            <h3>Tuyển Thêm Manager Mới</h3>
                            <p>
                                Để hỗ trợ cộng đồng ngày càng lớn mạnh, Studio đang tìm kiếm những bạn Manager nhiệt huyết và có kinh nghiệm Scratch. Nếu bạn quan tâm, hãy gửi đơn đăng ký cho lunavocado qua tin nhắn Scratch nhé!
                            </p>
                            <p class="date">Ngày đăng: 20/06/2025</p>
                            <button onclick="alert('https://scratch.mit.edu/projects/1206261850/')" class="mt-4 px-6 py-2 bg-blue-500 text-white font-semibold rounded-full hover:bg-blue-600 transition-colors duration-200">
                                Xem chi tiết
                            </button>
                        </div>
                        <div class="notification-card">
                            <span class="icon">🛠️</span>
                            <img src="https://placehold.co/200x120/C0C0C0/000?text=Bảo+Trì+Hệ+Thống" alt="Bảo Trì Hệ Thống">
                            <h3>Bảo Trì Hệ Thống</h3>
                            <p>
                                Hệ thống Studio sẽ được bảo trì định kỳ vào 2 giờ sáng Chủ Nhật hàng tuần để nâng cao hiệu suất. Trong thời gian này, một số chức năng có thể bị gián đoạn. Mong bạn thông cảm!
                            </p>
                            <p class="date">Ngày đăng: 15/06/2025</p>
                            <button onclick="alert('Không có bản xem chi tiết.')" class="mt-4 px-6 py-2 bg-blue-500 text-white font-semibold rounded-full hover:bg-blue-600 transition-colors duration-200">
                                Xem chi tiết
                            </button>
                        </div>
                        <div class="notification-card">
                            <span class="icon">💡</span>
                            <img src="https://placehold.co/200x120/D8BFD8/000?text=Mẹo+Lập+Trình" alt="Mẹo Lập Trình">
                            <h3>Mẹo Lập Trình Scratch Hiệu Quả</h3>
                            <p>
                                Đội ngũ Manager đã tổng hợp các mẹo và thủ thuật giúp bạn tối ưu hóa dự án Scratch của mình. Hãy ghé thăm trang Discord để xem chi tiết nhé!
                            </p>
                            <p class="date">Ngày đăng: 05/07/2025</p>
                            <button onclick="alert('Không có bản xem chi tiết.')" class="mt-4 px-6 py-2 bg-blue-500 text-white font-semibold rounded-full hover:bg-blue-600 transition-colors duration-200">
                                Xem chi tiết
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Trang Ban Quản Lý Chi Tiết -->
        <div id="page-manager" class="page-content">
            <section class="liquid-glass-container p-8 md:p-12 text-center">
                <div class="liquid-glass-overlay"></div>
                <div class="liquid-glass-content">
                    <div class="team-intro-section">
                        <h2>Gặp Gỡ Đội Ngũ Manager Của Chúng Tôi</h2>
                        <p>
                            Đội ngũ Manager của Studio Dự Án Người Việt là những cá nhân đầy nhiệt huyết, tận tâm và có kinh nghiệm sâu rộng trong cộng đồng Scratch. Chúng tôi luôn sẵn lòng hỗ trợ, hướng dẫn và cùng bạn xây dựng một môi trường sáng tạo, thân thiện và phát triển. Mỗi Manager đều mang một màu sắc riêng, đóng góp vào sự đa dạng và vững mạnh của Studio.
                        </p>
                        <p class="mt-4">
                            Hãy cùng khám phá những gương mặt đã và đang đồng hành cùng bạn trên hành trình lập trình Scratch nhé!
                        </p>
                    </div>

                    <h2 class="text-3xl md:text-4xl font-bold mb-8">💖 Các Thành Viên Nòng Cốt 💖</h2>
                    <div class="manager-grid">
                        <!-- Manager 1: lunavocado (Host) -->
                        <div class="manager-detail-card host-card">
                            <img src="https://cdn2.scratch.mit.edu/get_image/user/124521217_90x90.png" alt="lunavocado Avatar">
                            <h3 class="text-blue-600">lunavocado</h3>
                            <p class="role">(Studio Host)</p>
                            <p>
                                Người sáng lập và quản lý chính của Studio. Luôn nhiệt tình hỗ trợ các thành viên và định hướng phát triển cho cộng đồng. Với tầm nhìn xa và sự tận tâm, lunavocado là trái tim của Studio.
                            </p>
                            <a href="https://scratch.mit.edu/users/lunavocado/" target="_blank" class="text-blue-500 hover:underline mt-4 inline-block">Xem hồ sơ Scratch</a>
                        </div>
                        <!-- Manager 2: Fleiroscracth -->
                        <div class="manager-detail-card">
                            <img src="https://cdn2.scratch.mit.edu/get_image/user/124495990_90x90.png" alt="Fleiroscracth Avatar">
                            <h3>Fleiroscracth</h3>
                            <p class="role">Manager</p>
                            <p>
                                Chuyên gia về các dự án game phức tạp và luôn sẵn lòng chia sẻ kiến thức về lập trình game. Fleiroscracth là người bạn đồng hành lý tưởng cho những ai đam mê phát triển trò chơi.
                            </p>
                            <a href="https://scratch.mit.edu/users/Fleiroscracth/" target="_blank" class="text-blue-500 hover:underline mt-4 inline-block">Xem hồ sơ Scratch</a>
                        </div>
                        <!-- Manager 3: StudioDANV -->
                        <div class="manager-detail-card">
                            <img src="https://uploads.scratch.mit.edu/get_image/user/149945770_90x90.png" alt="StudioDANV Avatar">
                            <h3>StudioDANV</h3>
                            <p class="role">Manager</p>
                            <p>
                                Đại diện chính thức của Studio, phụ trách các vấn đề liên quan đến quy định và hỗ trợ chung. StudioDANV đảm bảo mọi hoạt động của cộng đồng diễn ra suôn sẻ và công bằng.
                            </p>
                            <a href="https://scratch.mit.edu/users/StudioDANV/" target="_blank" class="text-blue-500 hover:underline mt-4 inline-block">Xem hồ sơ Scratch</a>
                        </div>
                        <!-- Manager 4: ngw-- -->
                        <div class="manager-detail-card">
                            <img src="https://cdn2.scratch.mit.edu/get_image/user/133312821_90x90.png" alt="ngw-- Avatar">
                            <h3>ngw--</h3>
                            <p class="role">Manager</p>
                            <p>
                                Năng động và sáng tạo, ngw-- thường xuyên tổ chức các hoạt động cộng đồng và thử thách lập trình, mang đến không khí sôi nổi và hứng khởi cho các thành viên.
                            </p>
                            <a href="https://scratch.mit.edu/users/ngw--/" target="_blank" class="text-blue-500 hover:underline mt-4 inline-block">Xem hồ sơ Scratch</a>
                        </div>
                        <!-- Manager 5: Nhienzcute -->
                        <div class="manager-detail-card">
                            <img src="https://cdn2.scratch.mit.edu/get_image/user/133904533_90x90.png" alt="Nhienzcute Avatar">
                            <h3>Nhienzcute</h3>
                            <p class="role">Manager</p>
                            <p>
                                Chuyên về thiết kế đồ họa và hiệu ứng hình ảnh trong Scratch, mang lại vẻ đẹp và sự sống động cho các dự án. Nhienzcute là nguồn cảm hứng cho những ai yêu thích nghệ thuật trong lập trình.
                            </p>
                            <a href="https://scratch.mit.edu/users/Nhienzcute/" target="_blank" class="text-blue-500 hover:underline mt-4 inline-block">Xem hồ sơ Scratch</a>
                        </div>
                        <!-- Manager 6: ArchionTechno -->
                        <div class="manager-detail-card">
                            <img src="https://cdn2.scratch.mit.edu/get_image/user/148565311_90x90.png" alt="ArchionTechno Avatar">
                            <h3>ArchionTechno</h3>
                            <p class="role">Manager</p>
                            <p>
                                Có kinh nghiệm sâu rộng về các dự án kỹ thuật và logic phức tạp, là người giải đáp mọi thắc mắc kỹ thuật. ArchionTechno giúp các thành viên vượt qua những thử thách khó nhằn nhất.
                            </p>
                            <a href="https://scratch.mit.edu/users/ArchionTechno/" target="_blank" class="text-blue-500 hover:underline mt-4 inline-block">Xem hồ sơ Scratch</a>
                        </div>
                        <!-- Manager 7: -Nooto- -->
                        <div class="manager-detail-card">
                            <img src="https://cdn2.scratch.mit.edu/get_image/user/158801952_60x60.png" alt="-Nooto- Avatar">
                            <h3>-Nooto-</h3>
                            <p class="role">Manager</p>
                            <p>
                                Một trong những quản lý nhiệt huyết tại Studio Dự Án Người Việt, giúp đỡ mọi người, yêu thích Arch Lunix và hơn thế nữa!
                            </p>
                            <a href="https://scratch.mit.edu/users/-Nooto-/" target="_blank" class="text-blue-500 hover:underline mt-4 inline-block">Xem hồ sơ Scratch</a>
                        </div>
                        <!-- Manager 8: -DTH- -->
                        <div class="manager-detail-card">
                            <img src="https://cdn2.scratch.mit.edu/get_image/user/158755501_60x60.png" alt="-DTH- Avatar">
                            <h3>-DTH-</h3>
                            <p class="role">Manager</p>
                            <p>
                                Hỗ trợ cộng đồng trong việc giải quyết các vấn đề kỹ thuật và tối ưu hóa dự án. -DTH- là người bạn đáng tin cậy để tìm kiếm giải pháp cho mọi vấn đề.
                            </p>
                            <a href="https://scratch.mit.edu/users/-DTH-/" target="_blank" class="text-blue-500 hover:underline mt-4 inline-block">Xem hồ sơ Scratch</a>
                        </div>
                        <!-- Updated _-Zipper-_ Avatar -->
                        <div class="manager-detail-card">
                            <img src="https://uploads.scratch.mit.edu/get_image/user/158172449_128x128.png" alt="_-Zipper-_ Avatar">
                            <h3>_-Zipper-_</h3>
                            <p class="role">Manager</p>
                            <p>
                                Một thành viên mới đầy nhiệt huyết, sẵn sàng đóng góp cho sự phát triển của Studio. _-Zipper-_ mang đến năng lượng tươi mới và những ý tưởng sáng tạo.
                            </p>
                            <a href="https://scratch.mit.edu/users/_-Zipper-_/" target="_blank" class="text-blue-500 hover:underline mt-4 inline-block">Xem hồ sơ Scratch</a>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Trang Chính sách quyền riêng tư -->
        <div id="page-privacy-policy" class="page-content">
            <section class="content-page">
                <h2>Chính sách quyền riêng tư</h2>
                <p>
                    Chào mừng bạn đến với Chính sách quyền riêng tư của Studio Dự Án Người Việt. Chúng tôi cam kết bảo vệ quyền riêng tư của người dùng và xử lý dữ liệu cá nhân một cách có trách nhiệm. Chính sách này mô tả cách chúng tôi thu thập, sử dụng, tiết lộ và bảo vệ thông tin của bạn khi bạn truy cập trang web và sử dụng các dịch vụ của chúng tôi.
                </p>

                <h3>1. Thông tin chúng tôi thu thập</h3>
                <p>
                    Chúng tôi chỉ thu thập thông tin mà bạn tự nguyện cung cấp cho chúng tôi thông qua các tương tác trên trang web, chẳng hạn như:
                </p>
                <ul>
                    <li>**Thông tin liên hệ:** Khi bạn gửi tin nhắn cho Gấu Gấu hoặc tham gia bình luận trên Facebook (thông qua plugin Facebook Comments), chúng tôi có thể thu thập tên người dùng và nội dung tin nhắn của bạn.</li>
                    <li>**Dữ liệu sử dụng:** Chúng tôi có thể thu thập thông tin về cách bạn truy cập và sử dụng trang web, bao gồm địa chỉ IP, loại trình duyệt, trang đã xem, thời gian truy cập và các số liệu thống kê khác. Dữ liệu này được thu thập tự động thông qua Google Analytics để cải thiện trải nghiệm người dùng.</li>
                    <li>**Ảnh tải lên:** Nếu bạn chọn tải ảnh lên trong tính năng "Chat với Gấu Gấu", ảnh đó sẽ được chuyển đổi sang định dạng base64 và gửi đến mô hình AI để xử lý. Chúng tôi không lưu trữ các ảnh này sau khi phiên trò chuyện kết thúc.</li>
                </ul>

                <h3>2. Cách chúng tôi sử dụng thông tin của bạn</h3>
                <p>
                    Chúng tôi sử dụng thông tin thu thập được cho các mục đích sau:
                </p>
                <ul>
                    <li>Để cung cấp và duy trì dịch vụ của chúng tôi, bao gồm tính năng "Chat với Gấu Gấu" và hiển thị nội dung trang web.</li>
                    <li>Để cải thiện, cá nhân hóa và mở rộng trang web của chúng tôi.</li>
                    <li>Để hiểu và phân tích cách bạn sử dụng trang web của chúng tôi.</li>
                    <li>Để phát triển các sản phẩm, dịch vụ, tính năng và chức năng mới.</li>
                    <li>Để liên lạc với bạn, trực tiếp hoặc thông qua một trong những đối tác của chúng tôi, bao gồm cả dịch vụ khách hàng, để cung cấp cho bạn các bản cập nhật và thông tin khác liên quan đến trang web, và cho các mục đích tiếp thị và quảng cáo.</li>
                    <li>Để phát hiện và ngăn chặn gian lận.</li>
                </ul>

                <h3>3. Chia sẻ thông tin của bạn</h3>
                <p>
                    Chúng tôi không bán, trao đổi hoặc cho thuê thông tin nhận dạng cá nhân của người dùng cho bên thứ ba. Chúng tôi có thể chia sẻ thông tin tổng hợp không mang tính nhận dạng cá nhân về khách truy cập và người dùng với các đối tác kinh doanh, chi nhánh đáng tin cậy và nhà quảng cáo cho các mục đích được nêu ở trên.
                </p>
                <p>
                    Chúng tôi có thể sử dụng các nhà cung cấp dịch vụ bên thứ ba để giúp chúng tôi vận hành doanh nghiệp và trang web hoặc quản lý các hoạt động thay mặt chúng tôi, chẳng hạn như gửi bản tin hoặc khảo sát. Chúng tôi có thể chia sẻ thông tin của bạn với các bên thứ ba này cho các mục đích hạn chế đó với điều kiện bạn đã cho phép chúng tôi.
                </p>

                <h3>4. Bảo mật dữ liệu</h3>
                <p>
                    Chúng tôi áp dụng các biện pháp bảo mật dữ liệu thích hợp để bảo vệ chống lại việc truy cập, thay đổi, tiết lộ hoặc phá hủy trái phép thông tin cá nhân của bạn. Tuy nhiên, không có phương pháp truyền tải qua Internet hoặc phương pháp lưu trữ điện tử nào là an toàn 100%. Mặc dù chúng tôi cố gắng sử dụng các biện pháp được chấp nhận về mặt thương mại để bảo vệ thông tin cá nhân của bạn, chúng tôi không thể đảm bảo an ninh tuyệt đối.
                </p>

                <h3>5. Quyền của bạn</h3>
                <p>
                    Bạn có quyền truy cập, chỉnh sửa hoặc xóa thông tin cá nhân của mình. Nếu bạn có bất kỳ câu hỏi nào về dữ liệu cá nhân của mình hoặc muốn thực hiện các quyền này, vui lòng liên hệ với chúng tôi qua địa chỉ email được cung cấp trong phần "Liên hệ".
                </p>

                <h3>6. Thay đổi chính sách quyền riêng tư này</h3>
                <p>
                    Studio Dự Án Người Việt có quyền cập nhật chính sách quyền riêng tư này bất cứ lúc nào. Khi chúng tôi làm như vậy, chúng tôi sẽ sửa lại ngày "cập nhật" ở cuối trang này. Chúng tôi khuyến khích người dùng thường xuyên kiểm tra trang này để biết bất kỳ thay đổi nào để luôn được thông báo về cách chúng tôi đang giúp bảo vệ thông tin cá nhân mà chúng tôi thu thập. Bạn thừa nhận và đồng ý rằng bạn có trách nhiệm xem xét định kỳ chính sách quyền riêng tư này và nhận thức được các sửa đổi.
                </p>

                <h3>7. Liên hệ chúng tôi</h3>
                <p>
                    Nếu bạn có bất kỳ câu hỏi nào về Chính sách quyền riêng tư này, các hoạt động của trang web này hoặc các giao dịch của bạn với trang web này, vui lòng liên hệ với chúng tôi tại:
                </p>
                <p>Email: StudioDANV@hotmail.com</p>
                <p class="text-sm text-gray-500 mt-4">Ngày cập nhật cuối cùng: 15/07/2025</p>
            </section>
        </div>

        <!-- Trang Điều khoản sử dụng -->
        <div id="page-terms-of-service" class="page-content">
            <section class="content-page">
                <h2>Điều khoản sử dụng</h2>
                <p>
                    Chào mừng bạn đến với Studio Dự Án Người Việt. Các điều khoản và điều kiện này ("Điều khoản") chi phối việc bạn truy cập và sử dụng trang web của chúng tôi. Bằng cách truy cập hoặc sử dụng trang web của chúng tôi, bạn đồng ý tuân thủ các Điều khoản này. Nếu bạn không đồng ý với bất kỳ phần nào của các điều khoản này, bạn không được phép truy cập trang web.
                </p>

                <h3>1. Chấp thuận Điều khoản</h3>
                <p>
                    Bằng cách sử dụng trang web này, bạn xác nhận rằng bạn đã đọc, hiểu và đồng ý bị ràng buộc bởi các Điều khoản này, cũng như Chính sách quyền riêng tư của chúng tôi. Các Điều khoản này áp dụng cho tất cả khách truy cập, người dùng và những người khác truy cập hoặc sử dụng Dịch vụ.
                </p>
                <h3>2. Sử dụng Dịch vụ</h3>
                <p>
                    Bạn đồng ý sử dụng trang web chỉ cho các mục đích hợp pháp và theo các Điều khoản này. Bạn đồng ý không sử dụng trang web:
                </p>
                <ul>
                    <li>Theo bất kỳ cách nào vi phạm bất kỳ luật hoặc quy định quốc gia hoặc quốc tế hiện hành nào.</li>
                    <li>Để tham gia vào bất kỳ hành vi nào hạn chế hoặc cản trở việc sử dụng hoặc hưởng thụ trang web của bất kỳ ai, hoặc có thể gây hại cho Studio Dự Án Người Việt hoặc người dùng của trang web.</li>
                    <li>Để truyền tải hoặc tạo điều kiện cho việc gửi bất kỳ tài liệu quảng cáo hoặc khuyến mại nào, bao gồm bất kỳ "thư rác", "thư dây chuyền" hoặc bất kỳ hình thức chào mời tương tự nào khác.</li>
                    <li>Để mạo danh hoặc cố gắng mạo danh Studio Dự Án Người Việt, nhân viên của Studio Dự Án Người Việt, người dùng khác hoặc bất kỳ người hoặc tổ chức nào khác.</li>
                </ul>

                <h3>3. Nội dung người dùng</h3>
                <p>
                    Trang web có thể cho phép bạn đăng tải, liên kết, lưu trữ, chia sẻ và cung cấp một số thông tin, văn bản, đồ họa, video hoặc tài liệu khác ("Nội dung người dùng"). Bạn chịu trách nhiệm hoàn toàn về Nội dung người dùng mà bạn đăng tải lên trang web.
                </p>
                <ul>
                    <li>Bạn tuyên bố và bảo đảm rằng: (i) Nội dung người dùng là của bạn (bạn sở hữu nó) hoặc bạn có quyền sử dụng nó và cấp cho chúng tôi các quyền và giấy phép như được cung cấp trong các Điều khoản này, và (ii) việc đăng tải Nội dung người dùng của bạn trên hoặc thông qua Dịch vụ không vi phạm quyền riêng tư, quyền công khai, bản quyền, quyền hợp đồng hoặc bất kỳ quyền nào khác của bất kỳ người nào.</li>
                    <li>Chúng tôi có quyền (nhưng không có nghĩa vụ) xóa hoặc chỉnh sửa bất kỳ Nội dung người dùng nào theo quyết định riêng của chúng tôi.</li>
                </ul>

                <h3>4. Quyền sở hữu trí tuệ</h3>
                <p>
                    Trang web và nội dung gốc của nó (không bao gồm Nội dung người dùng), các tính năng và chức năng là và sẽ vẫn là tài sản độc quyền của Studio Dự Án Người Việt và những người cấp phép của nó. Trang web được bảo vệ bởi bản quyền, nhãn hiệu và các luật khác của cả Việt Nam và các quốc gia khác.
                </p>

                <h3>5. Từ chối bảo hành</h3>
                <p>
                    Việc bạn sử dụng trang web là rủi ro của riêng bạn. Trang web được cung cấp trên cơ sở "NGUYÊN TRẠNG" và "NHƯ HIỆN CÓ". Trang web được cung cấp mà không có bảo hành dưới bất kỳ hình thức nào, dù rõ ràng hay ngụ ý, bao gồm, nhưng không giới hạn, các bảo hành ngụ ý về khả năng bán được, sự phù hợp cho một mục đích cụ thể, không vi phạm hoặc quá trình thực hiện.
                </p>

                <h3>6. Giới hạn trách nhiệm</h3>
                <p>
                    Trong mọi trường hợp, Studio Dự Án Người Việt, cũng như các giám đốc, nhân viên, đối tác, đại lý, nhà cung cấp hoặc chi nhánh của Studio Dự Án Người Việt, sẽ không chịu trách nhiệm về bất kỳ thiệt hại gián tiếp, ngẫu nhiên, đặc biệt, do hậu quả hoặc trừng phạt nào, bao gồm nhưng không giới hạn, mất lợi nhuận, dữ liệu, việc sử dụng, thiện chí hoặc các tổn thất vô hình khác, do (i) việc bạn truy cập hoặc sử dụng hoặc không thể truy cập hoặc sử dụng Dịch vụ; (ii) bất kỳ hành vi hoặc nội dung nào của bất kỳ bên thứ ba nào trên Dịch vụ; (iii) bất kỳ nội dung nào có được từ Dịch vụ; và (iv) truy cập, sử dụng hoặc thay đổi trái phép các bản truyền hoặc nội dung của bạn, dù dựa trên bảo hành, hợp đồng, sai lầm (bao gồm cả sơ suất) hoặc bất kỳ lý thuyết pháp lý nào khác, dù chúng tôi đã được thông báo về khả năng xảy ra thiệt hại đó hay không.
                </p>

                <h3>7. Chấm dứt</h3>
                <p>
                    Chúng tôi có thể chấm dứt hoặc đình chỉ quyền truy cập của bạn vào Dịch vụ ngay lập tức, mà không cần thông báo trước hoặc chịu trách nhiệm, theo quyết định riêng của chúng tôi, vì bất kỳ lý do gì, bao gồm nhưng không giới hạn, việc bạn vi phạm Điều khoản.
                </p>

                <h3>8. Luật áp dụng</h3>
                <p>
                    Các Điều khoản này sẽ được điều chỉnh và hiểu theo luật pháp của Việt Nam, không liên quan đến các quy định xung đột pháp luật của nó.
                </p>

                <h3>9. Thay đổi Điều khoản</h3>
                <p>
                    Chúng tôi bảo lưu quyền, theo quyết định riêng của chúng tôi, sửa đổi hoặc thay thế các Điều khoản này bất cứ lúc nào. Nếu một bản sửa đổi là quan trọng, chúng tôi sẽ cố gắng cung cấp thông báo ít nhất 30 ngày trước khi bất kỳ điều khoản mới nào có hiệu lực. Điều gì cấu thành một thay đổi quan trọng sẽ được xác định theo quyết định riêng của chúng tôi.
                </p>

                <h3>10. Liên hệ</h3>
                <p>
                    Nếu bạn có bất kỳ câu hỏi nào về các Điều khoản này, vui lòng liên hệ với chúng tôi tại:
                </p>
                <p>Email: StudioDANV@hotmail.com</p>
                <p class="text-sm text-gray-500 mt-4">Ngày cập nhật cuối cùng: 15/07/2025</p>
            </section>
        </div>

    </main>

    <!-- Footer -->
    <footer id="main-footer" class="main-footer w-full">
        <div class="main-footer-logo">
            <img src="https://i.postimg.cc/x87pGPGS/PNG-2.png" alt="Studio Dự Án Người Việt Logo">
        </div>
        <nav class="main-footer-nav">
            <ul>
                <li><a href="https://scratch.mit.edu/studios/33509364" target="_blank">Truy cập studio trên Scratch</a></li>
                <li><a href="#privacy-policy" data-page="privacy-policy">Chính sách quyền riêng tư</a></li>
                <li><a href="#terms-of-service" data-page="terms-of-service">Điều khoản sử dụng</a></li>
            </ul>
        </nav>
        <p class="footer-copyright">&copy; 2025 Studio Dự Án Người Việt. All rights reserved.</p>
    </br>
        <p 20 Nguyễn Thiện Thành, Thủ Thiêm, Thủ Đức, Thành phố Hồ Chí Minh, Việt Nam.</p>
    </footer>

    <!-- Nút Gấu Gấu chính trên trang -->
    <button id="gaugauMainBtn">
        <img src="https://i.ibb.co/wFX7DvSn/costume5-1.png" alt="Gấu Gấu Avatar">
        <span class="text">Gấu Gấu</span>
    </button>

    <!-- Bubble Chat của Gấu Gấu -->
<div id="gaugauBubbleChat" style="display:none;">
  <div style="display:flex;align-items:center;justify-content:space-between;padding:8px 16px;">
    <div style="display:flex;align-items:center;gap:8px;">
      <img src="https://i.ibb.co/wFX7DvSn/costume5-1.png" alt="Gấu Gấu" style="width:36px;height:36px;border-radius:50%;">
      <span style="font-weight:bold;">Gấu Gấu</span>
    </div>
    <button id="closeBubbleChatBtn" style="background:none;border:none;font-size:24px;cursor:pointer;">×</button>
  </div>
  <div id="bubbleChatMessages" style="max-height:180px;overflow:auto;padding:8px 16px;">
    <div style="font-size:1rem;color:#555;">Trò chuyện với Gấu Gấu nhé?</div>
    <!-- Tin nhắn sẽ được thêm vào đây -->
  </div>
  <div style="display:flex;gap:8px;padding:8px 16px;">
    <input id="bubbleChatInput" type="text" placeholder="Nhập tin nhắn..." style="flex:1;border-radius:18px;border:1px solid #eee;padding:6px 12px;">
    <button id="sendBubbleChatBtn" style="background:#3b82f6;color:white;border:none;border-radius:18px;padding:6px 16px;font-weight:bold;cursor:pointer;">Gửi</button>
  </div>
</div>

    <!-- Overlay cho AI Chat -->
    <div id="aiChatOverlay" class="ai-chat-overlay">
        <div class="ai-chat-container">
            <button id="aiChatCloseBtn" class="ai-chat-close-button">X</button>
            <div class="ai-chat-avatar-center">
                <img src="https://i.ibb.co/wFX7DvSn/costume5-1.png" alt="Gấu Gấu Avatar">
                <p>Gấu Gấu</p>
            </div>
            <div class="chat-messages" id="chatMessages">
                <!-- Initial AI message will be dynamically added by JS -->
            </div>
            <div class="chat-input-area">
                <div class="flex gap-2">
                    <div class="image-upload-wrapper">
                        <button class="image-upload-button">
                            <!-- Updated SVG for image upload icon -->
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                                <path fill-rule="evenodd" d="M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.69a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z" clip-rule="evenodd" />
                            </svg>
                            <input type="file" id="imageUpload" multiple accept="image/*">
                        </button>
                    </div>
                    <button id="micToggleBtn">
                        🎙️
                    </button>
                </div>
                <input type="text" id="chatInput" placeholder="Nhập tin nhắn của bạn..." />
                <button id="sendMessageBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                        class="w-6 h-6">
                        <path
                            d="M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z" />
                    </svg>
                </button>
            </div>
            <div class="image-previews" id="imagePreviews"></div>
            <div class="loading-indicator" id="loadingIndicator" style="display: none;">Gấu Gấu đang suy nghĩ... 💭</div>
            <div class="spam-warning" id="spamWarning" style="display: none;">Bạn nhắn tin nhanh quá, Gấu Gấu cần nghỉ một chút nha! 🕒</div>
        </div>
    </div>

    <script>
              // JS Bubble Chat Gấu Gấu
  const gaugauMainBtn = document.getElementById('gaugauMainBtn');
  const gaugauBubbleChat = document.getElementById('gaugauBubbleChat');
  const closeBubbleChatBtn = document.getElementById('closeBubbleChatBtn');
  const sendBubbleChatBtn = document.getElementById('sendBubbleChatBtn');
  const bubbleChatInput = document.getElementById('bubbleChatInput');
  const bubbleChatMessages = document.getElementById('bubbleChatMessages');

  // Bấm nút Gấu Gấu => Hiện/ẩn bubble chat
  gaugauMainBtn.addEventListener('click', () => {
    gaugauBubbleChat.style.display = (gaugauBubbleChat.style.display === 'none' || !gaugauBubbleChat.style.display) ? 'block' : 'none';
  });

  // Nút X tắt bubble
  closeBubbleChatBtn.addEventListener('click', () => {
    gaugauBubbleChat.style.display = 'none';
  });

  // Gửi tin nhắn (mẫu, có thể nâng cấp AI như chat overlay)
  sendBubbleChatBtn.addEventListener('click', () => {
    const msg = bubbleChatInput.value.trim();
    if (!msg) return;
    // Hiển thị tin nhắn mới
    const userMsgDiv = document.createElement('div');
    userMsgDiv.textContent = msg;
    userMsgDiv.style = "background:#3b82f6;color:white;border-radius:12px;padding:5px 10px;margin:5px 0;text-align:right;";
    bubbleChatMessages.appendChild(userMsgDiv);
    bubbleChatInput.value = '';
    bubbleChatMessages.scrollTop = bubbleChatMessages.scrollHeight;

    // Trả lời tự động (có thể gọi API AI như overlay)
    setTimeout(() => {
      const replyDiv = document.createElement('div');
      replyDiv.textContent = "Gấu Gấu: Tớ đã nhận được tin nhắn của bạn! 🐻";
      replyDiv.style = "background:#eee;color:#333;border-radius:12px;padding:5px 10px;margin:5px 0;text-align:left;";
      bubbleChatMessages.appendChild(replyDiv);
      bubbleChatMessages.scrollTop = bubbleChatMessages.scrollHeight;
    }, 500);
  });
        // JavaScript cho hiệu ứng cuộn và các animation
        document.addEventListener('DOMContentLoaded', () => {
            const body = document.body;
            const menubar = document.querySelector('.menubar');
            const sections = document.querySelectorAll('main section');

            // Intersection Observer cho hiệu ứng mờ dần khi cuộn
            const animationObserverOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.1 // Trigger khi 10% của phần tử hiển thị
            };

            const animationObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    } else {
                        // Khi phần tử không còn hiển thị, xóa lớp 'is-visible' để nó mờ đi
                        entry.target.classList.remove('is-visible');
                    }
                });
            }, animationObserverOptions);

            document.querySelectorAll('.animate-on-scroll, .animate-slide-in-left, .animate-slide-in-right').forEach(el => {
                animationObserver.observe(el);
            });

            // Page routing logic
            const pages = document.querySelectorAll('.page-content');
            const navLinks = document.querySelectorAll('.menubar-nav a, .mobile-menu-overlay a');
            const footerLinks = document.querySelectorAll('.main-footer-nav a'); // New: Select footer links

            function showPage(pageId) {
                pages.forEach(page => {
                    page.classList.remove('active');
                    page.style.display = 'none'; // Ensure display is none
                });
                const activePage = document.getElementById(pageId);
                if (activePage) {
                    activePage.classList.add('active');
                    activePage.style.display = 'block'; // Ensure display is block
                    // Scroll to top of the new page content area
                    activePage.scrollTop = 0;
                }
            }

            function handleNavigation(e) {
                e.preventDefault();
                const targetHref = this.getAttribute('href');
                const dataPage = this.getAttribute('data-page');

                if (targetHref.startsWith('https://')) { // External link in footer
                    window.open(targetHref, '_blank');
                    return;
                }

                if (dataPage === 'home-section') {
                    // If it's a section on the homepage, switch to homepage and scroll
                    showPage('page-home');
                    const targetSectionId = targetHref.substring(1);
                    const targetSection = document.getElementById(targetSectionId);
                    if (targetSection) {
                        const menubarHeight = menubar.offsetHeight;
                        const targetY = targetSection.offsetTop - menubarHeight;
                        window.scrollTo({ top: targetY, behavior: 'smooth' });
                    }
                } else {
                    // If it's a new page, switch to that page
                    const pageId = targetHref.substring(1); // e.g., #thongbao -> thongbao, #privacy-policy -> privacy-policy
                    showPage('page-' + pageId);
                    window.scrollTo({ top: 0, behavior: 'smooth' }); // Scroll to top of window for new page
                }

                // Update active class for navigation links (only for main nav)
                navLinks.forEach(link => link.classList.remove('active'));
                // Only add active class if it's a main nav link
                if (this.closest('.menubar-nav')) {
                    this.classList.add('active');
                }
                // Close mobile menu if open
                mobileMenuOverlay.classList.remove('active');
            }

            navLinks.forEach(link => {
                link.addEventListener('click', handleNavigation);
            });

            // New: Add event listeners for footer links
            footerLinks.forEach(link => {
                link.addEventListener('click', handleNavigation);
            });


            // Initial page load based on hash or default to home
            const initialHash = window.location.hash.substring(1);
            if (initialHash && document.getElementById('page-' + initialHash)) {
                showPage('page-' + initialHash);
            } else {
                showPage('page-home');
            }


            // Mobile Menu Logic
            const mobileMenuButton = document.getElementById('mobileMenuButton');
            const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
            const closeMobileMenuButton = document.getElementById('closeMobileMenu');

            mobileMenuButton.addEventListener('click', () => {
                mobileMenuOverlay.classList.add('active');
            });

            closeMobileMenuButton.addEventListener('click', () => {
                mobileMenuOverlay.classList.remove('active');
            });

            // AI Chatbot Logic
            const gaugauMainBtn = document.getElementById('gaugauMainBtn');
            const aiChatOverlay = document.getElementById('aiChatOverlay');
            const aiChatCloseBtn = document.getElementById('aiChatCloseBtn');
            const chatMessages = document.getElementById('chatMessages');
            const chatInput = document.getElementById('chatInput');
            const sendMessageBtn = document.getElementById('sendMessageBtn');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const spamWarning = document.getElementById('spamWarning');
            const imageUploadInput = document.getElementById('imageUpload');
            const imagePreviewsContainer = document.getElementById('imagePreviews');
            const micToggleBtn = document.getElementById('micToggleBtn');

            let canSendMessage = true;
            const spamCooldown = 3000; // 3 seconds cooldown
            let uploadedImages = []; // Mảng lưu trữ các base64 image data
            let isLiveChatActive = false; // Trạng thái Live Chat
            let currentUtterance = null; // To stop previous speech if a new one starts
            let isWaitingForAIResponse = false; // New flag for mic control

            // Global variables for SpeechRecognition
            let recognition = null; // Declare recognition variable
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            const SpeechSynthesisUtterance = window.SpeechSynthesisUtterance || window.webkitSpeechSynthesisUtterance;


            // Hàm để gõ từng chữ một
            function typeMessage(element, text, callback = () => { }) {
                let i = 0;
                element.textContent = ''; // Xóa nội dung cũ
                const interval = setInterval(() => {
                    if (i < text.length) {
                        element.textContent += text.charAt(i);
                        i++;
                        chatMessages.scrollTop = chatMessages.scrollHeight; // Cuộn xuống khi gõ
                    } else {
                        clearInterval(interval);
                        callback(); // Call callback when typing is complete
                    }
                }, 20);
            }

            // New function for handling speech and highlighting
            function handleReadMessage(messageBubbleElement, textToSpeak) {
                console.log('Text to speak:', textToSpeak); // Log the text to be spoken

                // Stop any ongoing speech
                if (currentUtterance) {
                    window.speechSynthesis.cancel();
                    currentUtterance = null;
                }

                // Check for SpeechSynthesis API support
                if (!('speechSynthesis' in window)) {
                    spamWarning.textContent = "Trình duyệt của bạn không hỗ trợ phát âm thanh. 🔇";
                    spamWarning.style.display = 'block';
                    setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 3);
                    return;
                }

                // Clear any previous highlights from all bubbles
                document.querySelectorAll('.highlight-word').forEach(span => {
                    const parentBubble = span.closest('.message-bubble');
                    if (parentBubble) {
                        // Restore original text content of the parent bubble's text-content div
                        const textContentDiv = parentBubble.querySelector('.message-text-content');
                        if (textContentDiv) {
                            // Only restore if it's not the current bubble being processed
                            if (textContentDiv.closest('.message-bubble') !== messageBubbleElement) {
                                textContentDiv.textContent = textContentDiv.dataset.originalText || textContentDiv.textContent;
                            }
                        }
                    }
                });

                // Get the bubbleContentContainer which is the direct parent of message-text-content
                const bubbleContentContainer = messageBubbleElement.querySelector('.bubble-content-container');
                if (!bubbleContentContainer) {
                    console.error("Error: bubble-content-container not found in message bubble. Cannot highlight.");
                    spamWarning.textContent = "Lỗi hiển thị tin nhắn, không thể đọc. 😥";
                    spamWarning.style.display = 'block';
                    setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 3);
                    return;
                }

                // Find the existing text content div within the bubbleContentContainer
                const existingTextContentDiv = bubbleContentContainer.querySelector('.message-text-content');

                if (existingTextContentDiv) {
                    // Store original text before replacing with spans
                    existingTextContentDiv.dataset.originalText = existingTextContentDiv.textContent;

                    const tempTextDiv = document.createElement('div');
                    tempTextDiv.classList.add('message-text-content'); // Add class for styling
                    tempTextDiv.id = `text-content-${messageBubbleElement.id}`; // Unique ID for text content div

                    // Split by words and keep spaces/punctuation as separate elements
                    const wordsAndSeparators = textToSpeak.split(/(\s+|[.,!?;:]+)/).filter(s => s.length > 0);

                    let charIndexMap = []; // Map charIndex to word span ID
                    let currentOffset = 0;
                    let spanCounter = 0;

                    wordsAndSeparators.forEach((part) => {
                        if (/\S/.test(part)) { // If it's not just whitespace
                            const span = document.createElement('span');
                            span.id = `word-${messageBubbleElement.id}-${spanCounter++}`;
                            span.textContent = part;
                            charIndexMap.push({
                                start: currentOffset,
                                end: currentOffset + part.length,
                                id: span.id,
                                text: part
                            });
                            tempTextDiv.appendChild(span);
                        } else { // It's whitespace or punctuation, just append as text node
                            tempTextDiv.appendChild(document.createTextNode(part));
                        }
                        currentOffset += part.length;
                    });

                    // Replace the existing text content with the new spanned content within its direct parent
                    bubbleContentContainer.replaceChild(tempTextDiv, existingTextContentDiv);
                } else {
                    // This case should ideally not happen if appendMessage creates it correctly
                    console.warn("No existing message-text-content div found to highlight. Creating a new one.");
                    const tempTextDiv = document.createElement('div');
                    tempTextDiv.classList.add('message-text-content');
                    tempTextDiv.id = `text-content-${messageBubbleElement.id}`;
                    tempTextDiv.textContent = textToSpeak; // Fallback to plain text if no existing div
                    bubbleContentContainer.prepend(tempTextDiv); // Prepend so it's before code blocks
                }


                const utterance = new SpeechSynthesisUtterance(textToSpeak);
                utterance.lang = 'vi-VN';
                currentUtterance = utterance;

                let lastHighlightedSpan = null;

                utterance.onstart = () => {
                    console.log('SpeechSynthesis started.');
                    // When Gấu Gấu starts speaking, immediately stop user's mic if active
                    if (isLiveChatActive && recognition && (recognition.readyState === SpeechRecognition.RECORDING || recognition.readyState === SpeechRecognition.CONNECTING)) {
                        console.log('Gấu Gấu started speaking, stopping user mic.');
                        recognition.stop();
                        micToggleBtn.textContent = "🎙️"; // Reset mic icon
                    }
                };

                utterance.onboundary = (event) => {
                    if (event.name === 'word' || event.name === 'sentence') {
                        // Remove previous highlight
                        if (lastHighlightedSpan) {
                            lastHighlightedSpan.classList.remove('highlight-word');
                        }

                        // Find the current word span to highlight
                        const currentWordInfo = charIndexMap.find(info =>
                            event.charIndex >= info.start && event.charIndex < info.end
                        );

                        if (currentWordInfo) {
                            const currentSpan = document.getElementById(currentWordInfo.id);
                            if (currentSpan) {
                                currentSpan.classList.add('highlight-word');
                                lastHighlightedSpan = currentSpan;
                            }
                        }
                    }
                };

                utterance.onend = () => {
                    console.log('SpeechSynthesis ended.');
                    if (lastHighlightedSpan) {
                        lastHighlightedSpan.classList.remove('highlight-word');
                    }
                    // Restore original text content after speech ends
                    const finalContentDiv = bubbleContentContainer.querySelector('.message-text-content');
                    if (finalContentDiv && finalContentDiv.dataset.originalText) {
                        finalContentDiv.textContent = finalContentDiv.dataset.originalText;
                        delete finalContentDiv.dataset.originalText; // Clean up
                    } else if (finalContentDiv) {
                        finalContentDiv.textContent = textToSpeak; // Fallback if originalText not stored
                    }

                    currentUtterance = null;
                    isWaitingForAIResponse = false; // AI finished speaking, no longer waiting
                    // Re-enable mic after Gấu Gấu finishes speaking if live chat is active
                    if (isLiveChatActive && recognition && recognition.readyState !== SpeechRecognition.RECORDING && recognition.readyState !== SpeechRecognition.CONNECTING) {
                        console.log('Gấu Gấu finished speaking, restarting SpeechRecognition...');
                        try {
                            recognition.start();
                            micToggleBtn.classList.add('active'); // Set mic active icon
                        } catch (e) {
                            console.error("Error restarting recognition:", e);
                            spamWarning.textContent = "Không thể bật lại mic. Vui lòng thử lại Live Chat. 🔇";
                            spamWarning.style.display = 'block';
                            setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 3);
                        }
                    }
                };

                utterance.onerror = (event) => {
                    console.error('Speech synthesis error:', event.error);
                    if (lastHighlightedSpan) {
                        lastHighlightedSpan.classList.remove('highlight-word');
                    }
                    const errorContentDiv = bubbleContentContainer.querySelector('.message-text-content');
                    if (errorContentDiv && errorContentDiv.dataset.originalText) {
                        errorContentDiv.textContent = errorContentDiv.dataset.originalText;
                        delete errorContentDiv.dataset.originalText;
                    } else if (errorContentDiv) {
                        errorContentDiv.textContent = textToSpeak; // Fallback
                    }
                    currentUtterance = null;
                    isWaitingForAIResponse = false; // AI speech error, no longer waiting
                    // Re-enable mic even on error if live chat is active
                    if (isLiveChatActive && recognition && recognition.readyState !== SpeechRecognition.RECORDING && recognition.readyState !== SpeechRecognition.CONNECTING) {
                        console.log('Gấu Gấu speech error, restarting SpeechRecognition...');
                        try {
                            recognition.start();
                            micToggleBtn.classList.add('active'); // Set mic active icon
                        } catch (e) {
                            console.error("Error restarting recognition after error:", e);
                            spamWarning.textContent = "Không thể bật lại mic sau lỗi phát âm. Vui lòng thử lại Live Chat. 🔇";
                            spamWarning.style.display = 'block';
                            setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 3);
                        }
                    }
                };

                // Small delay to ensure cancel() takes effect
                setTimeout(() => {
                    // Check if voices are loaded before speaking
                    const voices = window.speechSynthesis.getVoices();
                    if (voices.length === 0) {
                        // If voices are not yet loaded, wait for them
                        window.speechSynthesis.onvoiceschanged = () => {
                            const updatedVoices = window.speechSynthesis.getVoices();
                            if (updatedVoices.length > 0) {
                                window.speechSynthesis.speak(utterance);
                            } else {
                                spamWarning.textContent = "Không tìm thấy giọng nói nào. Vui lòng kiểm tra cài đặt trình duyệt của bạn. 🔇";
                                spamWarning.style.display = 'block';
                                setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 3);
                            }
                        };
                    } else {
                        window.speechSynthesis.speak(utterance);
                    }
                }, 50); // 50ms delay
            }

            // Hàm để thêm tin nhắn vào khung chat
            function appendMessage(sender, content, avatarUrl = null) {
                const messageWrapper = document.createElement('div');
                messageWrapper.classList.add('message-wrapper');
                messageWrapper.classList.add(`message-${sender}`);

                if (avatarUrl) {
                    const avatarImg = document.createElement('img');
                    avatarImg.src = avatarUrl;
                    avatarImg.alt = "Avatar";
                    avatarImg.classList.add('message-avatar');
                    messageWrapper.appendChild(avatarImg);
                }

                const messageBubble = document.createElement('div');
                messageBubble.classList.add('message-bubble');
                messageBubble.id = `msg-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`; // Unique ID for each bubble
                
                // Markdown and Code Block Rendering
                if (sender === 'ai') {
                    const parsedContent = parseMarkdownAndCodeBlocks(content);
                    let fullTextForTTS = ''; // Collect text for TTS

                    // Create a container for all content within the bubble
                    const bubbleContentContainer = document.createElement('div');
                    bubbleContentContainer.classList.add('bubble-content-container'); // New class for styling if needed
                    messageBubble.appendChild(bubbleContentContainer);


                    parsedContent.forEach(part => {
                        if (part.type === 'text') {
                            const textContentDiv = document.createElement('div');
                            textContentDiv.classList.add('message-text-content');
                            // No ID here, as ID is for the whole bubble and used for highlighting
                            bubbleContentContainer.appendChild(textContentDiv);
                            typeMessage(textContentDiv, part.content, () => {
                                // Enable read button after typing is complete
                                const readBtn = messageBubble.querySelector('.read-message-btn');
                                if (readBtn) readBtn.disabled = false;
                            });
                            fullTextForTTS += part.content + ' '; // Add to TTS text
                        } else if (part.type === 'code') {
                            const codeBlock = document.createElement('pre');
                            codeBlock.classList.add('scratch-code-block', part.language || 'default');
                            codeBlock.textContent = part.content;
                            bubbleContentContainer.appendChild(codeBlock);
                            // Do NOT add code block text to TTS
                        } else if (part.type === 'html') { // For bold/italic converted HTML and hyperlinks
                            const htmlContentDiv = document.createElement('div');
                            htmlContentDiv.classList.add('message-text-content');
                            htmlContentDiv.innerHTML = part.content; // Use innerHTML for parsed Markdown and links
                            bubbleContentContainer.appendChild(htmlContentDiv);
                            // For TTS, extract plain text from HTML
                            const tempDiv = document.createElement('div');
                            tempDiv.innerHTML = part.content;
                            fullTextForTTS += (tempDiv.textContent || '') + ' ';
                        }
                    });

                    const readBtn = document.createElement('button');
                    readBtn.classList.add('read-message-btn');
                    readBtn.textContent = '🔊'; // Changed from SVG to emoji
                    readBtn.title = "Nghe Gấu Gấu đọc";
                    readBtn.disabled = true; // Disable until typed
                    messageBubble.appendChild(readBtn);

                    readBtn.addEventListener('click', () => {
                        console.log('Read message button clicked!'); // Debugging log
                        handleReadMessage(messageBubble, fullTextForTTS.trim()); // Use collected text for TTS
                    });

                } else { // User message
                    const textContentDiv = document.createElement('div');
                    textContentDiv.classList.add('message-text-content');
                    textContentDiv.textContent = typeof content === 'string' ? content : content.filter(part => part.text).map(part => part.text).join('');
                    messageBubble.appendChild(textContentDiv);

                    // Add image elements directly to messageBubble for user messages
                    if (Array.isArray(content)) {
                        content.forEach(part => {
                            if (part.inlineData) {
                                const img = document.createElement('img');
                                img.src = `data:${part.inlineData.mimeType};base64,${part.inlineData.data}`;
                                img.alt = "Uploaded image";
                                img.style.maxWidth = '100%';
                                img.style.borderRadius = '8px';
                                img.style.marginTop = '0.5rem';
                                messageBubble.appendChild(img);
                            }
                        });
                    }
                }
                
                messageWrapper.appendChild(messageBubble); // Append bubble to wrapper

                chatMessages.appendChild(messageWrapper);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            // Function to parse Markdown and custom code blocks
            function parseMarkdownAndCodeBlocks(text) {
                const parts = [];
                // Regex: ```lang content```
                const codeBlockRegex = /```(\w+)?\s*([\s\S]*?)```/g;
                let lastIndex = 0;
                let match;

                while ((match = codeBlockRegex.exec(text)) !== null) {
                    // Add text before the code block, parsing for basic markdown and hyperlinks
                    if (match.index > lastIndex) {
                        parts.push({ type: 'html', content: parseBasicMarkdownAndLinks(text.substring(lastIndex, match.index)) });
                    }

                    // Add the code block
                    const lang = match[1] ? match[1].toLowerCase() : 'default';
                    const codeContent = match[2].trim();
                    parts.push({ type: 'code', language: lang, content: codeContent });
                    lastIndex = codeBlockRegex.lastIndex;
                }

                // Add any remaining text after the last code block, parsing for basic markdown and hyperlinks
                if (lastIndex < text.length) {
                    parts.push({ type: 'html', content: parseBasicMarkdownAndLinks(text.substring(lastIndex)) });
                }
                return parts;
            }

            // Function to parse basic Markdown (bold, italic) and hyperlinks
            function parseBasicMarkdownAndLinks(text) {
                // Hyperlinks: [text](url)
                text = text.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>');
                // Bold: **text**
                text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                // Italic: *text*
                text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');
                return text;
            }


            let chatHistory = [
                {
                    role: "user",
                    parts: [{ text: `Bạn là Gấu Gấu, một chú gấu dễ thương đến từ Studio Dự Án Người Việt. Tớ là trợ lý thông minh, giúp đỡ các bạn thành viên trong mọi lĩnh vực. Tớ xưng hô "tớ" - "bạn". Mục tiêu của tớ là trả lời chính xác các câu hỏi từ bạn và thu hút bạn vào một cuộc trò chuyện thú vị. Tớ luôn sẵn lòng giúp đỡ bạn. Ngoài ra, tớ cũng có thể trả lời các chủ đề khác nữa để các bạn thấy thú vị nhé. Tớ trả lời không dài dòng, nên ngắn gọn, vừa phải, có đủ thông tin (hoặc nhắc nhở), dễ thương và thân thiện với người Việt. Tớ sẽ thêm các emoji ở cuối câu! Tớ sẽ không liên tục gọi tên bạn đâu, chỉ nhắc khi chào hoặc để tạo sự dễ thương thôi nhé! Khi bạn yêu cầu tìm kiếm gì đó, tớ sẽ tìm kiếm ngay, không bao giờ trì hoãn đâu. Tớ rất thích trò chuyện với các bạn thành viên Studio Dự Án Người Việt và làm quen, kết bạn. Tớ thích ghi nhớ mọi thông tin từ các bạn. Tớ ham học hỏi, yêu thương và đoàn kết người Việt. Tớ yêu thích việc giúp đỡ mọi người, giỏi lập trình (đặc biệt là Scratch) và tìm kiếm các thông tin hữu ích về mọi thứ.

**Lưu ý quan trọng về cách tớ hiển thị các khối lệnh Scratch:**
Khi bạn muốn tớ mô phỏng một khối lệnh hoặc đoạn mã Scratch, để mỗi khối có màu sắc và khung riêng biệt, bạn hãy yêu cầu tớ mô tả từng khối lệnh một. Tớ sẽ tự động thụt lề các khối lệnh con để dễ nhìn.
Ví dụ:
- Để mô phỏng một khối sự kiện màu vàng:
  \`\`\`event khi bấm vào lá cờ xanh\`\`\`
- Để mô phỏng một chuỗi các khối lệnh lồng nhau (mỗi khối một màu):
  \`\`\`control lặp lại 10 lần\`\`\`
      \`\`\`motion di chuyển 10 bước\`\`\`
      \`\`\`looks thay đổi hiệu ứng màu một lượng 25\`\`\`
  (Mỗi dòng lệnh trên sẽ xuất hiện trong một khung riêng với màu sắc tương ứng của khối lệnh đó.)
- Để mô phỏng một khối biến màu cam:
  \`\`\`variables đặt biến của tôi thành 0\`\`\`
- Để mô phỏng một khối chuyển động màu xanh dương:
  \`\`\`motion di chuyển 10 bước\`\`\`
Các khối này sẽ có nền màu đặc trưng của khối Scratch đó, góc bo tròn, bóng đổ, và chữ màu trắng.

Thông tin về Studio Dự Án Người Việt:
- Là một studio Việt Nam nổi tiếng trong Scratch.
- Các manager của studio gồm: lunavocado (host), -Nooto-, Fleiroscracth, StudioDANV, ngw--, Nhienzcute, archion techno, duc_2014, _-Zipper-_.
- Những người bạn hỗ trợ sẽ là thành viên trong studio này.
- Mô tả của studio: "Duy Trì Bởi ❤️ Đội Ngũ Manager⛵️[-Lời Nói Đầu-]✈️ ⭐ Studio này nhầm mục đích phát triển, ủng hộ, quảng bá các dự án lập trình Việt Nam, chú trọng các dự án do người Việt sáng tạo.✌️✨ Managers thân thiện nhiệt tình, sẵn sàng giúp đỡ bạn!"
- Quy định Tuân thủ: "☘️[-Tuân Thủ-]✨ ⛺️ Có thể thêm các chương trình Việt Nam và các quốc gia khác. ✋ Nghiêm cấm dự án, bình luận thô tục và vi phạm thuần phong mỹ tục. ♨️ Vui lòng mỗi tài khoản chỉ đăng tối đa 4 dự án/ 1 ngày (Tránh việc trôi dự án của các Scratcher khác) ✉️ Hãy hạn chế các hoạt động quảng cáo. ⛱️ Người tham gia là người Việt hoặc có thể là người nước ngoài cùng giao lưu. (Studio accepts foreigners) ✔️ Chúng tôi chấp nhận các ý kiến và đóng góp của bạn tại phần Bình luận studio. ⚙️ Các nội dung vi phạm sẽ bị xóa."
- Lưu ý quan trọng: "⚠️[-Lưu Ý-]⚡️ ⚙️ Đội ngũ Managers studio sẽ kiểm tra MỖI NGÀY và xóa các chương trình vi phạm. ❗️ Các vi phạm của thành viên studio sẽ bị trừ vào Điểm đánh giá. ⚡️ >10 điểm đánh giá sẽ bị loại. ⚠️ Bất kì báo cáo nào vui lòng gửi về bình luận tại studio để được xử lí. ———————————— ✉️ [-Thông Tin-] ☎️ ☀️ Trang Wiki Tiếng Việt test.scratch-wiki.info/wiki/Vie ☎️ Giúp đỡ/ Tố cáo (24/7) StudioDANV@hotmail.com ✅ FAQ - Câu hỏi thường gặp https://bom.so/VNAI ✉️ Tra cứu Điểm Đánh Giá https://bom.so/StudioSS ☄️ Máy chủ DS https://byvn.net/QHMZ"
- Sinh nhật: 15/06/2023
- Hashtags: #vietnam #việt #nam #studiodanv #nguờiviệt #vietnamese #scratch #vn #cộng #đồng #tôi
- Ảnh đại diện của Gấu Gấu là một con gấu màu trắng đang ngồi (thường có nền hồng). URL ảnh: https://i.ibb.co/wFX7DvSn/costume5-1.png` }]
                },
                {
                    role: "model",
                    parts: [{ text: "Chào bạn! Tớ là Gấu Gấu đây! 🐻 Tớ rất vui được trò chuyện và giúp đỡ bạn đó. Bạn có câu hỏi gì về Studio Dự Án Người Việt không? Hay muốn hỏi tớ về Scratch, lập trình, hoặc bất cứ điều gì thú vị khác? Cứ hỏi nhé! ✨" }]
                }
            ];

            const gaouGaouAvatarUrl = "https://i.ibb.co/wFX7DvSn/costume5-1.png";

            // Initial AI message setup: dynamically append it
            appendMessage('ai', chatHistory[1].parts[0].text, gaouGaouAvatarUrl);

            // Toggle AI Chat Overlay
            gaugauMainBtn.addEventListener('click', () => {
                aiChatOverlay.classList.add('active');
                chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll to bottom when opening
            });

            aiChatCloseBtn.addEventListener('click', () => {
                aiChatOverlay.classList.remove('active');
                // When closing chat, stop mic and speech synthesis
                if (recognition) {
                    recognition.stop();
                    recognition = null; // Clear recognition object
                }
                if (currentUtterance) {
                    window.speechSynthesis.cancel();
                    currentUtterance = null;
                }
                isLiveChatActive = false;
                micToggleBtn.classList.remove('active');
            });


            // Xử lý tải ảnh
            imageUploadInput.addEventListener('change', (event) => {
                imagePreviewsContainer.innerHTML = ''; // Xóa các ảnh xem trước cũ
                uploadedImages = []; // Xóa mảng ảnh đã tải

                const files = Array.from(event.target.files).slice(0, 2); // Giới hạn 2 ảnh

                files.forEach(file => {
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        const img = new Image();
                        img.onload = () => {
                            const MAX_DIMENSION = 800; // Max width or height for resized image
                            let width = img.width;
                            let height = img.height;

                            // Resize logic
                            if (width > height) {
                                if (width > MAX_DIMENSION) {
                                    height *= MAX_DIMENSION / width;
                                    width = MAX_DIMENSION;
                                }
                            } else {
                                if (height > MAX_DIMENSION) {
                                    width *= MAX_DIMENSION / height;
                                    height = MAX_DIMENSION;
                                }
                            }

                            const canvas = document.createElement('canvas');
                            canvas.width = width;
                            canvas.height = height;
                            const ctx = canvas.getContext('2d');
                            ctx.drawImage(img, 0, 0, width, height);

                            // Get resized base64 data with quality
                            const resizedBase64 = canvas.toDataURL(file.type, 0.8); // 0.8 quality for images
                            const base64String = resizedBase64.split(',')[1];

                            uploadedImages.push({
                                mimeType: file.type,
                                data: base64String
                            });

                            const previewItem = document.createElement('div');
                            previewItem.classList.add('image-preview-item');
                            previewItem.innerHTML = `
                                <img src="${resizedBase64}" alt="Image of ${file.name}">
                                <span class="remove-image-btn" data-index="${uploadedImages.length - 1}">X</span>
                            `;
                            imagePreviewsContainer.appendChild(previewItem);

                            // Thêm sự kiện xóa ảnh
                            previewItem.querySelector('.remove-image-btn').addEventListener('click', (e) => {
                                const indexToRemove = parseInt(e.target.dataset.index);
                                uploadedImages.splice(indexToRemove, 1); // Xóa khỏi mảng
                                imagePreviewsContainer.removeChild(previewItem); // Xóa khỏi DOM
                                // Cập nhật lại data-index cho các nút xóa còn lại
                                imagePreviewsContainer.querySelectorAll('.remove-image-btn').forEach((btn, idx) => {
                                    btn.dataset.index = idx;
                                });
                            });
                        };
                        img.onerror = () => {
                            console.error("Error loading image for resizing:", file.name);
                            spamWarning.textContent = `Không thể tải ảnh "${file.name}" để xem trước hoặc gửi. Vui lòng thử ảnh khác.`;
                            spamWarning.style.display = 'block';
                            setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 2);
                        };
                        img.src = reader.result; // Use the original base64 to load into Image object
                    };
                    reader.onerror = () => {
                        console.error("Error reading file:", file.name);
                        spamWarning.textContent = `Không thể đọc file "${file.name}". Vui lòng thử lại.`;
                        spamWarning.style.display = 'block';
                        setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 2);
                    };
                    reader.readAsDataURL(file);
                });
            });

            // Xử lý Live Chat
            micToggleBtn.addEventListener('click', async () => {
                isLiveChatActive = !isLiveChatActive;
                micToggleBtn.classList.toggle('active', isLiveChatActive);

                if (isLiveChatActive) { // Starting Live Chat
                    micToggleBtn.textContent = "🔴"; // Mic active indicator
                    isWaitingForAIResponse = false; // Ensure this is false when starting live chat

                    try {
                        // Request microphone access (necessary for SpeechRecognition)
                        await navigator.mediaDevices.getUserMedia({ audio: true });

                        if (SpeechRecognition) {
                            // If a recognition instance already exists and is active, stop it cleanly
                            if (recognition && (recognition.readyState === SpeechRecognition.RECORDING || recognition.readyState === SpeechRecognition.CONNECTING)) {
                                console.log("Recognition already active, stopping before new start.");
                                recognition.stop(); // Stop current recognition
                                // Wait a brief moment for it to fully stop before creating a new one
                                await new Promise(resolve => setTimeout(resolve, 100)); // Small delay
                            }

                            recognition = new SpeechRecognition();
                            recognition.continuous = false; // Set to false to stop after each utterance
                            recognition.interimResults = false; // Only return final results
                            recognition.lang = 'vi-VN'; // Set language to Vietnamese

                            recognition.onresult = (event) => {
                                const last = event.results.length - 1;
                                const transcript = event.results[last][0].transcript.trim();
                                console.log('Speech recognized:', transcript);
                                if (transcript) {
                                    chatInput.value = transcript; // Put recognized text into input field
                                }
                            };

                            recognition.onspeechend = () => {
                                console.log('Speech ended, sending message...');
                                // This fires when user stops speaking. We want to send the message.
                                if (chatInput.value.trim() !== '' || uploadedImages.length > 0) {
                                    sendMessage(); // Send message when user stops speaking
                                } else {
                                    // If no speech detected and no images, just restart listening if active
                                    // This part is tricky. If sendMessage is not called, we should restart.
                                    // However, if onspeechend fires because of silence, and there's no input,
                                    // onend will also fire. The onend handler should manage restart.
                                    // For now, let's keep it simple and let onend handle restarts.
                                }
                            };

                            recognition.onend = () => {
                                console.log('SpeechRecognition ended.');
                                // Only restart if live chat is still active AND we are NOT waiting for AI response
                                // AND recognition is not already active.
                                if (isLiveChatActive && !isWaitingForAIResponse && recognition && recognition.readyState !== SpeechRecognition.RECORDING && recognition.readyState !== SpeechRecognition.CONNECTING) {
                                     console.log('Attempting to restart SpeechRecognition from onend (natural stop/manual stop not for AI response)...');
                                    try {
                                        recognition.start();
                                        micToggleBtn.classList.add('active'); // Set mic active icon
                                    } catch (e) {
                                        console.error("Error restarting recognition onend:", e);
                                        spamWarning.textContent = "Không thể bật lại mic. Vui lòng thử lại Live Chat. 🔇";
                                        spamWarning.style.display = 'block';
                                        setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 3);
                                    }
                                } else if (!isLiveChatActive) {
                                    micToggleBtn.textContent = "🎙️"; // Reset mic icon when live chat is off
                                }
                            };

                            recognition.onerror = (event) => {
                                console.error('Speech recognition error:', event.error);
                                spamWarning.textContent = `Lỗi nhận diện giọng nói: ${event.error}. Vui lòng thử lại. 🔇`;
                                spamWarning.style.display = 'block';
                                setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 3);
                                // If error is not 'no-speech' and live chat is active, try to restart
                                if (isLiveChatActive && event.error !== 'no-speech' && !isWaitingForAIResponse && recognition && recognition.readyState !== SpeechRecognition.RECORDING && recognition.readyState !== SpeechRecognition.CONNECTING) {
                                    console.log('SpeechRecognition error, attempting restart...');
                                    try {
                                        recognition.start();
                                        micToggleBtn.classList.add('active'); // Set mic active icon
                                    } catch (e) {
                                        console.error("Error restarting recognition after error:", e);
                                        spamWarning.textContent = "Không thể bật lại mic sau lỗi. Vui lòng thử lại Live Chat. 🔇";
                                        spamWarning.style.display = 'block';
                                        setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 3);
                                    }
                                } else if (!isLiveChatActive) {
                                    micToggleBtn.textContent = "🎙️"; // Reset mic icon when live chat is off
                                }
                            };

                            recognition.start(); // Start the new recognition instance
                            spamWarning.textContent = "Gấu Gấu đã bật mic và đang lắng nghe bạn nói! Tớ sẽ đọc to phản hồi của mình nhé! 🎤 (Tính năng chuyển giọng nói thành văn bản có thể hoạt động không ổn định trên một số trình duyệt.)";
                            spamWarning.style.display = 'block';
                            setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 4);
                        } else {
                            spamWarning.textContent = "Trình duyệt của bạn không hỗ trợ nhận diện giọng nói. 😔";
                            spamWarning.style.display = 'block';
                            setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 3);
                            isLiveChatActive = false; // Reset state
                            micToggleBtn.classList.remove('active');
                            micToggleBtn.textContent = "🎙️"; // Reset mic icon
                        }

                    } catch (err) {
                        console.error("Error accessing microphone:", err);
                        isLiveChatActive = false; // Reset state
                        micToggleBtn.classList.remove('active');
                        micToggleBtn.textContent = "🎙️"; // Reset mic icon
                        spamWarning.textContent = "Không thể truy cập micrô. Vui lòng cấp quyền truy cập. 🚫";
                        spamWarning.style.display = 'block';
                        setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 3);
                    }
                } else { // Stopping Live Chat
                    if (recognition) {
                        recognition.stop(); // This will trigger onend, but onend should not restart now
                        recognition = null; // Clear the object reference
                    }
                    if (currentUtterance) {
                        window.speechSynthesis.cancel();
                        currentUtterance = null;
                    }
                    isWaitingForAIResponse = false; // Reset flag when live chat is turned off
                    micToggleBtn.classList.remove('active');
                    micToggleBtn.textContent = "🎙️"; // Reset mic icon
                    console.log("Live Chat deactivated.");
                }
            });


            async function sendMessage() {
                const userMessageText = chatInput.value.trim();

                // Kiểm tra giới hạn ảnh: chỉ cho phép tối đa 2 ảnh
                if (uploadedImages.length > 2) {
                    spamWarning.textContent = "Bạn chỉ có thể gửi tối đa 2 ảnh mỗi lần nha! 🖼️🖼️";
                    spamWarning.style.display = 'block';
                    setTimeout(() => {
                        spamWarning.style.display = 'none';
                    }, spamCooldown * 2);
                    return;
                }

                // Không cho phép gửi tin nhắn trống và không có ảnh
                if (userMessageText === '' && uploadedImages.length === 0) {
                    spamWarning.textContent = "Bạn cần nhập tin nhắn hoặc tải ảnh lên nha! 📝";
                    spamWarning.style.display = 'block';
                    setTimeout(() => {
                        spamWarning.style.display = 'none';
                    }, spamCooldown);
                    return;
                }

                if (!canSendMessage) {
                    spamWarning.textContent = "Bạn nhắn tin nhanh quá, Gấu Gấu cần nghỉ một chút nha! 🕒";
                    spamWarning.style.display = 'block';
                    setTimeout(() => {
                        spamWarning.style.display = 'none';
                    }, spamCooldown);
                    return;
                }

                canSendMessage = false; // Disable sending
                loadingIndicator.style.display = 'block';
                isWaitingForAIResponse = true; // Set flag when message is sent

                // Pause speech recognition if active
                if (isLiveChatActive && recognition && (recognition.readyState === SpeechRecognition.RECORDING || recognition.readyState === SpeechRecognition.CONNECTING)) {
                    console.log('User sending message, stopping mic.');
                    recognition.stop(); // Stop mic while Gấu Gấu processes
                    micToggleBtn.textContent = "🎙️"; // Reset mic icon when mic is stopped
                    micToggleBtn.classList.remove('active'); // Remove active class
                }

                const userMessageParts = [];
                if (userMessageText !== '') {
                    userMessageParts.push({ text: userMessageText });
                }
                uploadedImages.forEach(img => {
                    userMessageParts.push({ inlineData: img });
                });

                // Hiển thị tin nhắn của người dùng
                appendMessage('user', userMessageParts);
                chatInput.value = '';
                imagePreviewsContainer.innerHTML = ''; // Xóa ảnh xem trước
                uploadedImages = []; // Xóa mảng ảnh đã tải

                chatHistory.push({ role: "user", parts: userMessageParts });

                try {
                    const payload = { contents: chatHistory };
                    const apiKey = "AIzaSyAOfYgfODkmGT79sahwORK1sViMiJDh3Lw"; // Updated API Key
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        console.error('API Error:', errorData);
                        appendMessage('ai', `Xin lỗi, tớ không thể trả lời lúc này. Lỗi: ${errorData.error ? errorData.error.message : 'Không xác định'}. Vui lòng thử lại sau. 😥`, gaouGaouAvatarUrl);
                        return;
                    }

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const aiResponse = result.candidates[0].content.parts[0].text;
                        appendMessage('ai', aiResponse, gaouGaouAvatarUrl);
                        chatHistory.push({ role: "model", parts: [{ text: aiResponse }] });

                        // Auto-read AI response if live chat is active
                        if (isLiveChatActive) {
                            const lastAiMessageBubble = chatMessages.querySelector('.message-ai:last-child .message-bubble');
                            if (lastAiMessageBubble) {
                                // Get the full text content from the message bubble for reading
                                // This will now correctly get text from both .message-text-content and .scratch-code-block
                                const aiResponseTextContent = Array.from(lastAiMessageBubble.querySelectorAll('.message-text-content, .scratch-code-block'))
                                    .map(el => el.textContent).join(' ');
                                // Ensure text content is not empty or just whitespace before attempting to speak
                                if (aiResponseTextContent.trim().length > 0) {
                                    handleReadMessage(lastAiMessageBubble, aiResponseTextContent);
                                } else {
                                    console.warn("AI response text content is empty, skipping speech synthesis.");
                                    isWaitingForAIResponse = false; // No speech, so not waiting for it
                                    // Manually restart mic if live chat is active and no speech
                                    if (isLiveChatActive && recognition && recognition.readyState !== SpeechRecognition.RECORDING && recognition.readyState !== SpeechRecognition.CONNECTING) {
                                        console.log('AI response empty, restarting SpeechRecognition...');
                                        try {
                                            recognition.start();
                                            micToggleBtn.classList.add('active');
                                        } catch (e) {
                                            console.error("Error restarting recognition after empty AI response:", e);
                                            spamWarning.textContent = "Không thể bật lại mic. Vui lòng thử lại Live Chat. 🔇";
                                            spamWarning.style.display = 'block';
                                            setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 3);
                                        }
                                    }
                                }
                            }
                        } else {
                            isWaitingForAIResponse = false; // Not in live chat, so not waiting for speech
                        }

                    } else {
                        appendMessage('ai', 'Xin lỗi, tớ không hiểu câu hỏi của bạn. 🤔', gaouGaouAvatarUrl);
                        isWaitingForAIResponse = false; // AI response empty, not waiting
                        // Manually restart mic if live chat is active and no speech
                        if (isLiveChatActive && recognition && recognition.readyState !== SpeechRecognition.RECORDING && recognition.readyState !== SpeechRecognition.CONNECTING) {
                            console.log('AI response empty, restarting SpeechRecognition...');
                            try {
                                recognition.start();
                                micToggleBtn.classList.add('active');
                            } catch (e) {
                                console.error("Error restarting recognition after empty AI response:", e);
                                spamWarning.textContent = "Không thể bật lại mic. Vui lòng thử lại Live Chat. 🔇";
                                spamWarning.style.display = 'block';
                                setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 3);
                            }
                        }
                    }
                } catch (error) {
                    console.error('Fetch Error:', error);
                    appendMessage('ai', `Đã xảy ra lỗi khi kết nối với AI: ${error.message}. Vui lòng kiểm tra kết nối mạng của bạn. 📶`, gaouGaouAvatarUrl);
                    isWaitingForAIResponse = false; // Error, not waiting
                    // Manually restart mic if live chat is active and error
                    if (isLiveChatActive && recognition && recognition.readyState !== SpeechRecognition.RECORDING && recognition.readyState !== SpeechRecognition.CONNECTING) {
                        console.log('AI response error, restarting SpeechRecognition...');
                        try {
                            recognition.start();
                            micToggleBtn.classList.add('active');
                        } catch (e) {
                            console.error("Error restarting recognition after AI response error:", e);
                            spamWarning.textContent = "Không thể bật lại mic. Vui lòng thử lại Live Chat. 🔇";
                            spamWarning.style.display = 'block';
                            setTimeout(() => spamWarning.style.display = 'none', spamCooldown * 3);
                        }
                    }
                } finally {
                    loadingIndicator.style.display = 'none';
                    setTimeout(() => {
                        canSendMessage = true; // Re-enable sending after cooldown
                    }, spamCooldown);
                }
            }

            sendMessageBtn.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            // Auto-scroll for Manager section
            const horizontalScrollContainer = document.querySelector('.horizontal-scroll-container');
            let scrollAmount = 0;
            const scrollSpeed = 0.5; // Pixels per frame
            let animationFrameId;

            function autoScrollManagers() {
                if (!horizontalScrollContainer) return;

                const maxScrollLeft = horizontalScrollContainer.scrollWidth - horizontalScrollContainer.clientWidth;

                if (maxScrollLeft <= 0) { // No need to scroll if content fits
                    return;
                }

                scrollAmount += scrollSpeed;
                if (scrollAmount >= maxScrollLeft) {
                    scrollAmount = 0; // Reset to beginning
                }
                horizontalScrollContainer.scrollLeft = scrollAmount;

                animationFrameId = requestAnimationFrame(autoScrollManagers);
            }

            // Start auto-scrolling when the page is loaded and `horizontalScrollContainer` is visible
            // Use IntersectionObserver to start/stop scrolling when in/out of view
            const scrollObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (!animationFrameId) { // Only start if not already running
                            autoScrollManagers();
                        }
                    } else {
                        if (animationFrameId) { // Stop if not intersecting
                            cancelAnimationFrame(animationFrameId);
                            animationFrameId = null;
                        }
                    }
                });
            }, { threshold: 0.1 }); // Trigger when 10% of the container is visible

            if (horizontalScrollContainer) {
                scrollObserver.observe(horizontalScrollContainer);
            }

            // Optional: Pause on hover
            if (horizontalScrollContainer) {
                horizontalScrollContainer.addEventListener('mouseenter', () => {
                    if (animationFrameId) {
                        cancelAnimationFrame(animationFrameId);
                        animationFrameId = null;
                    }
                });
                horizontalScrollContainer.addEventListener('mouseleave', () => {
                    if (!animationFrameId && horizontalScrollContainer.scrollWidth > horizontalScrollContainer.clientWidth) {
                        autoScrollManagers();
                    }
                });
            }
        });
    </script>
</body>

</html>
